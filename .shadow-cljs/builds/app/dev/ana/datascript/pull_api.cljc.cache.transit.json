["^ ","~:output",["^ ","~:js","goog.provide('datascript.pull_api');\ngoog.require('cljs.core');\ngoog.require('datascript.db');\ngoog.require('datascript.pull_parser');\ndatascript.pull_api.into_BANG_ = (function datascript$pull_api$into_BANG_(transient_coll,items){\nreturn cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(cljs.core.conj_BANG_,transient_coll,items);\n});\ndatascript.pull_api._PLUS_default_limit_PLUS_ = (1000);\ndatascript.pull_api.initial_frame = (function datascript$pull_api$initial_frame(pattern,eids,multi_QMARK_){\nreturn cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,\"multi?\",\"multi?\",-749311069),new cljs.core.Keyword(null,\"eids\",\"eids\",1546550700),new cljs.core.Keyword(null,\"state\",\"state\",-1988618099),new cljs.core.Keyword(null,\"recursion\",\"recursion\",-749738765),new cljs.core.Keyword(null,\"specs\",\"specs\",1426570741),new cljs.core.Keyword(null,\"wildcard?\",\"wildcard?\",-686044101),new cljs.core.Keyword(null,\"kvps\",\"kvps\",65308317),new cljs.core.Keyword(null,\"pattern\",\"pattern\",242135423),new cljs.core.Keyword(null,\"results\",\"results\",-1134170113)],[multi_QMARK_,eids,new cljs.core.Keyword(null,\"pattern\",\"pattern\",242135423),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"depth\",\"depth\",1768663640),cljs.core.PersistentArrayMap.EMPTY,new cljs.core.Keyword(null,\"seen\",\"seen\",-518999789),cljs.core.PersistentHashSet.EMPTY], null),cljs.core.seq(new cljs.core.Keyword(null,\"attrs\",\"attrs\",-2090668713).cljs$core$IFn$_invoke$arity$1(pattern)),new cljs.core.Keyword(null,\"wildcard?\",\"wildcard?\",-686044101).cljs$core$IFn$_invoke$arity$1(pattern),cljs.core.transient$(cljs.core.PersistentArrayMap.EMPTY),pattern,cljs.core.transient$(cljs.core.PersistentVector.EMPTY)]);\n});\ndatascript.pull_api.subpattern_frame = (function datascript$pull_api$subpattern_frame(pattern,eids,multi_QMARK_,attr){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(datascript.pull_api.initial_frame(pattern,eids,multi_QMARK_),new cljs.core.Keyword(null,\"attr\",\"attr\",-604132353),attr);\n});\ndatascript.pull_api.reset_frame = (function datascript$pull_api$reset_frame(frame,eids,kvps){\nvar pattern = new cljs.core.Keyword(null,\"pattern\",\"pattern\",242135423).cljs$core$IFn$_invoke$arity$1(frame);\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic(frame,new cljs.core.Keyword(null,\"eids\",\"eids\",1546550700),eids,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,\"specs\",\"specs\",1426570741),cljs.core.seq(new cljs.core.Keyword(null,\"attrs\",\"attrs\",-2090668713).cljs$core$IFn$_invoke$arity$1(pattern)),new cljs.core.Keyword(null,\"wildcard?\",\"wildcard?\",-686044101),new cljs.core.Keyword(null,\"wildcard?\",\"wildcard?\",-686044101).cljs$core$IFn$_invoke$arity$1(pattern),new cljs.core.Keyword(null,\"kvps\",\"kvps\",65308317),cljs.core.transient$(cljs.core.PersistentArrayMap.EMPTY),new cljs.core.Keyword(null,\"results\",\"results\",-1134170113),(function (){var G__44930 = new cljs.core.Keyword(null,\"results\",\"results\",-1134170113).cljs$core$IFn$_invoke$arity$1(frame);\nif(cljs.core.seq(kvps)){\nreturn cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2(G__44930,kvps);\n} else {\nreturn G__44930;\n}\n})()], 0));\n});\ndatascript.pull_api.push_recursion = (function datascript$pull_api$push_recursion(rec,attr,eid){\nvar map__44931 = rec;\nvar map__44931__$1 = (((((!((map__44931 == null))))?(((((map__44931.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__44931.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__44931):map__44931);\nvar depth = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__44931__$1,new cljs.core.Keyword(null,\"depth\",\"depth\",1768663640));\nvar seen = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__44931__$1,new cljs.core.Keyword(null,\"seen\",\"seen\",-518999789));\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic(rec,new cljs.core.Keyword(null,\"depth\",\"depth\",1768663640),cljs.core.update.cljs$core$IFn$_invoke$arity$3(depth,attr,cljs.core.fnil.cljs$core$IFn$_invoke$arity$2(cljs.core.inc,(0))),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,\"seen\",\"seen\",-518999789),cljs.core.conj.cljs$core$IFn$_invoke$arity$2(seen,eid)], 0));\n});\ndatascript.pull_api.seen_eid_QMARK_ = (function datascript$pull_api$seen_eid_QMARK_(frame,eid){\nreturn cljs.core.contains_QMARK_(cljs.core.get_in.cljs$core$IFn$_invoke$arity$3(frame,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"recursion\",\"recursion\",-749738765),new cljs.core.Keyword(null,\"seen\",\"seen\",-518999789)], null),cljs.core.PersistentHashSet.EMPTY),eid);\n});\ndatascript.pull_api.pull_seen_eid = (function datascript$pull_api$pull_seen_eid(frame,frames,eid){\nif(datascript.pull_api.seen_eid_QMARK_(frame,eid)){\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$2(frames,cljs.core.update.cljs$core$IFn$_invoke$arity$4(frame,new cljs.core.Keyword(null,\"results\",\"results\",-1134170113),cljs.core.conj_BANG_,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(\"db\",\"id\",\"db/id\",-1388397098),eid], null)));\n} else {\nreturn null;\n}\n});\ndatascript.pull_api.single_frame_result = (function datascript$pull_api$single_frame_result(key,frame){\nvar G__44934 = new cljs.core.Keyword(null,\"kvps\",\"kvps\",65308317).cljs$core$IFn$_invoke$arity$1(frame);\nvar G__44934__$1 = (((G__44934 == null))?null:cljs.core.persistent_BANG_(G__44934));\nif((G__44934__$1 == null)){\nreturn null;\n} else {\nreturn cljs.core.get.cljs$core$IFn$_invoke$arity$2(G__44934__$1,key);\n}\n});\ndatascript.pull_api.recursion_result = (function datascript$pull_api$recursion_result(frame){\nreturn datascript.pull_api.single_frame_result(new cljs.core.Keyword(\"datascript.pull-api\",\"recursion\",\"datascript.pull-api/recursion\",-1897884534),frame);\n});\ndatascript.pull_api.recursion_frame = (function datascript$pull_api$recursion_frame(parent,eid){\nvar attr = new cljs.core.Keyword(null,\"attr\",\"attr\",-604132353).cljs$core$IFn$_invoke$arity$1(parent);\nvar rec = datascript.pull_api.push_recursion(new cljs.core.Keyword(null,\"recursion\",\"recursion\",-749738765).cljs$core$IFn$_invoke$arity$1(parent),attr,eid);\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(datascript.pull_api.subpattern_frame(new cljs.core.Keyword(null,\"pattern\",\"pattern\",242135423).cljs$core$IFn$_invoke$arity$1(parent),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [eid], null),false,new cljs.core.Keyword(\"datascript.pull-api\",\"recursion\",\"datascript.pull-api/recursion\",-1897884534)),new cljs.core.Keyword(null,\"recursion\",\"recursion\",-749738765),rec);\n});\ndatascript.pull_api.pull_recursion_frame = (function datascript$pull_api$pull_recursion_frame(db,p__44945){\nvar vec__44946 = p__44945;\nvar seq__44947 = cljs.core.seq(vec__44946);\nvar first__44948 = cljs.core.first(seq__44947);\nvar seq__44947__$1 = cljs.core.next(seq__44947);\nvar frame = first__44948;\nvar frames = seq__44947__$1;\nvar temp__5733__auto__ = cljs.core.seq(new cljs.core.Keyword(null,\"eids\",\"eids\",1546550700).cljs$core$IFn$_invoke$arity$1(frame));\nif(temp__5733__auto__){\nvar eids = temp__5733__auto__;\nvar frame__$1 = datascript.pull_api.reset_frame(frame,cljs.core.rest(eids),datascript.pull_api.recursion_result(frame));\nvar eid = cljs.core.first(eids);\nvar or__4185__auto__ = datascript.pull_api.pull_seen_eid(frame__$1,frames,eid);\nif(cljs.core.truth_(or__4185__auto__)){\nreturn or__4185__auto__;\n} else {\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$variadic(frames,frame__$1,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([datascript.pull_api.recursion_frame(frame__$1,eid)], 0));\n}\n} else {\nvar kvps = datascript.pull_api.recursion_result(frame);\nvar results = (function (){var G__44951 = new cljs.core.Keyword(null,\"results\",\"results\",-1134170113).cljs$core$IFn$_invoke$arity$1(frame);\nif(cljs.core.seq(kvps)){\nreturn cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2(G__44951,kvps);\n} else {\nreturn G__44951;\n}\n})();\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$2(frames,cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic(frame,new cljs.core.Keyword(null,\"state\",\"state\",-1988618099),new cljs.core.Keyword(null,\"done\",\"done\",-889844188),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,\"results\",\"results\",-1134170113),results], 0)));\n}\n});\ndatascript.pull_api.recurse_attr = (function datascript$pull_api$recurse_attr(db,attr,multi_QMARK_,eids,eid,parent,frames){\nvar map__44952 = parent;\nvar map__44952__$1 = (((((!((map__44952 == null))))?(((((map__44952.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__44952.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__44952):map__44952);\nvar recursion = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__44952__$1,new cljs.core.Keyword(null,\"recursion\",\"recursion\",-749738765));\nvar pattern = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__44952__$1,new cljs.core.Keyword(null,\"pattern\",\"pattern\",242135423));\nvar depth = cljs.core.get.cljs$core$IFn$_invoke$arity$3(cljs.core.get.cljs$core$IFn$_invoke$arity$2(recursion,new cljs.core.Keyword(null,\"depth\",\"depth\",1768663640)),attr,(0));\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"recursion\",\"recursion\",-749738765).cljs$core$IFn$_invoke$arity$1(cljs.core.get.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"attrs\",\"attrs\",-2090668713).cljs$core$IFn$_invoke$arity$1(pattern),attr)),depth)){\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$2(frames,parent);\n} else {\nreturn datascript.pull_api.pull_recursion_frame(db,cljs.core.conj.cljs$core$IFn$_invoke$arity$variadic(frames,parent,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.PersistentArrayMap(null, 7, [new cljs.core.Keyword(null,\"state\",\"state\",-1988618099),new cljs.core.Keyword(null,\"recursion\",\"recursion\",-749738765),new cljs.core.Keyword(null,\"pattern\",\"pattern\",242135423),pattern,new cljs.core.Keyword(null,\"attr\",\"attr\",-604132353),attr,new cljs.core.Keyword(null,\"multi?\",\"multi?\",-749311069),multi_QMARK_,new cljs.core.Keyword(null,\"eids\",\"eids\",1546550700),eids,new cljs.core.Keyword(null,\"recursion\",\"recursion\",-749738765),recursion,new cljs.core.Keyword(null,\"results\",\"results\",-1134170113),cljs.core.transient$(cljs.core.PersistentVector.EMPTY)], null)], 0)));\n}\n});\nvar pattern_45037 = (new datascript.pull_parser.PullSpec(true,cljs.core.PersistentArrayMap.EMPTY,null,null,null));\ndatascript.pull_api.expand_frame = (function datascript$pull_api$expand_frame(parent,eid,attr_key,multi_QMARK_,eids){\nvar rec = datascript.pull_api.push_recursion(new cljs.core.Keyword(null,\"recursion\",\"recursion\",-749738765).cljs$core$IFn$_invoke$arity$1(parent),attr_key,eid);\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(datascript.pull_api.subpattern_frame(pattern_45037,eids,multi_QMARK_,attr_key),new cljs.core.Keyword(null,\"recursion\",\"recursion\",-749738765),rec);\n});\ndatascript.pull_api.pull_attr_datoms = (function datascript$pull_api$pull_attr_datoms(db,attr_key,attr,eid,forward_QMARK_,datoms,opts,p__44956){\nvar vec__44957 = p__44956;\nvar seq__44958 = cljs.core.seq(vec__44957);\nvar first__44959 = cljs.core.first(seq__44958);\nvar seq__44958__$1 = cljs.core.next(seq__44958);\nvar parent = first__44959;\nvar frames = seq__44958__$1;\nvar limit = cljs.core.get.cljs$core$IFn$_invoke$arity$3(opts,new cljs.core.Keyword(null,\"limit\",\"limit\",-1355822363),(1000));\nvar attr_key__$1 = (function (){var or__4185__auto__ = new cljs.core.Keyword(null,\"as\",\"as\",1148689641).cljs$core$IFn$_invoke$arity$1(opts);\nif(cljs.core.truth_(or__4185__auto__)){\nreturn or__4185__auto__;\n} else {\nreturn attr_key;\n}\n})();\nvar found = cljs.core.not_empty((function (){var G__44962 = datoms;\nif(cljs.core.truth_(limit)){\nreturn cljs.core.into.cljs$core$IFn$_invoke$arity$3(cljs.core.PersistentVector.EMPTY,cljs.core.take.cljs$core$IFn$_invoke$arity$1(limit),G__44962);\n} else {\nreturn G__44962;\n}\n})());\nif(cljs.core.truth_(found)){\nvar ref_QMARK_ = datascript.db.ref_QMARK_(db,attr);\nvar component_QMARK_ = ((ref_QMARK_) && (datascript.db.component_QMARK_(db,attr)));\nvar multi_QMARK_ = (cljs.core.truth_(forward_QMARK_)?datascript.db.multival_QMARK_(db,attr):(!(component_QMARK_)));\nvar datom_val = (cljs.core.truth_(forward_QMARK_)?(function (d){\nreturn d.v;\n}):(function (d){\nreturn d.e;\n}));\nif(cljs.core.contains_QMARK_(opts,new cljs.core.Keyword(null,\"subpattern\",\"subpattern\",45002743))){\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$variadic(frames,parent,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([datascript.pull_api.subpattern_frame(new cljs.core.Keyword(null,\"subpattern\",\"subpattern\",45002743).cljs$core$IFn$_invoke$arity$1(opts),cljs.core.mapv.cljs$core$IFn$_invoke$arity$2(datom_val,found),multi_QMARK_,attr_key__$1)], 0));\n} else {\nif(cljs.core.contains_QMARK_(opts,new cljs.core.Keyword(null,\"recursion\",\"recursion\",-749738765))){\nreturn datascript.pull_api.recurse_attr(db,attr_key__$1,multi_QMARK_,cljs.core.mapv.cljs$core$IFn$_invoke$arity$2(datom_val,found),eid,parent,frames);\n} else {\nif(cljs.core.truth_(((component_QMARK_)?forward_QMARK_:false))){\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$variadic(frames,parent,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([datascript.pull_api.expand_frame(parent,eid,attr_key__$1,multi_QMARK_,cljs.core.mapv.cljs$core$IFn$_invoke$arity$2(datom_val,found))], 0));\n} else {\nvar as_value = (function (){var G__44967 = datom_val;\nif(ref_QMARK_){\nreturn cljs.core.comp.cljs$core$IFn$_invoke$arity$2((function (p1__44955_SHARP_){\nreturn cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(\"db\",\"id\",\"db/id\",-1388397098)],[p1__44955_SHARP_]);\n}),G__44967);\n} else {\nreturn G__44967;\n}\n})();\nvar single_QMARK_ = (!(multi_QMARK_));\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$2(frames,cljs.core.update.cljs$core$IFn$_invoke$arity$5(parent,new cljs.core.Keyword(null,\"kvps\",\"kvps\",65308317),cljs.core.assoc_BANG_,attr_key__$1,(function (){var G__44971 = cljs.core.into.cljs$core$IFn$_invoke$arity$3(cljs.core.PersistentVector.EMPTY,cljs.core.map.cljs$core$IFn$_invoke$arity$1(as_value),found);\nif(single_QMARK_){\nreturn cljs.core.first(G__44971);\n} else {\nreturn G__44971;\n}\n})()));\n\n}\n}\n}\n} else {\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$2(frames,(function (){var G__44973 = parent;\nif(cljs.core.contains_QMARK_(opts,new cljs.core.Keyword(null,\"default\",\"default\",-1987822328))){\nreturn cljs.core.update.cljs$core$IFn$_invoke$arity$5(G__44973,new cljs.core.Keyword(null,\"kvps\",\"kvps\",65308317),cljs.core.assoc_BANG_,attr_key__$1,new cljs.core.Keyword(null,\"default\",\"default\",-1987822328).cljs$core$IFn$_invoke$arity$1(opts));\n} else {\nreturn G__44973;\n}\n})());\n}\n});\ndatascript.pull_api.pull_attr = (function datascript$pull_api$pull_attr(db,spec,eid,frames){\nvar vec__44975 = spec;\nvar attr_key = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__44975,(0),null);\nvar opts = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__44975,(1),null);\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\"db\",\"id\",\"db/id\",-1388397098),attr_key)){\nif(cljs.core.truth_(cljs.core.not_empty(datascript.db._datoms(db,new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [eid], null))))){\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs.core.rest(frames),cljs.core.update.cljs$core$IFn$_invoke$arity$5(cljs.core.first(frames),new cljs.core.Keyword(null,\"kvps\",\"kvps\",65308317),cljs.core.assoc_BANG_,new cljs.core.Keyword(\"db\",\"id\",\"db/id\",-1388397098),eid));\n} else {\nreturn frames;\n}\n} else {\nvar attr = new cljs.core.Keyword(null,\"attr\",\"attr\",-604132353).cljs$core$IFn$_invoke$arity$1(opts);\nvar forward_QMARK_ = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(attr_key,attr);\nvar results = ((forward_QMARK_)?datascript.db._datoms(db,new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [eid,attr], null)):datascript.db._datoms(db,new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [attr,eid], null)));\nreturn datascript.pull_api.pull_attr_datoms(db,attr_key,attr,eid,forward_QMARK_,results,opts,frames);\n}\n});\ndatascript.pull_api.filter_reverse_attrs = cljs.core.filter.cljs$core$IFn$_invoke$arity$1((function (p__44978){\nvar vec__44979 = p__44978;\nvar k = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__44979,(0),null);\nvar v = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__44979,(1),null);\nreturn cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(k,new cljs.core.Keyword(null,\"attr\",\"attr\",-604132353).cljs$core$IFn$_invoke$arity$1(v));\n}));\ndatascript.pull_api.expand_reverse_subpattern_frame = (function datascript$pull_api$expand_reverse_subpattern_frame(parent,eid,rattrs){\nreturn datascript.pull_api.subpattern_frame(cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic(new cljs.core.Keyword(null,\"pattern\",\"pattern\",242135423).cljs$core$IFn$_invoke$arity$1(parent),new cljs.core.Keyword(null,\"attrs\",\"attrs\",-2090668713),rattrs,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,\"wildcard?\",\"wildcard?\",-686044101),false], 0)),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [eid], null),false,new cljs.core.Keyword(\"datascript.pull-api\",\"expand-rev\",\"datascript.pull-api/expand-rev\",2143627459));\n});\ndatascript.pull_api.expand_result = (function datascript$pull_api$expand_result(frames,kvps){\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs.core.rest(frames),cljs.core.update.cljs$core$IFn$_invoke$arity$4(cljs.core.first(frames),new cljs.core.Keyword(null,\"kvps\",\"kvps\",65308317),datascript.pull_api.into_BANG_,cljs.core.persistent_BANG_(kvps)));\n});\ndatascript.pull_api.pull_expand_reverse_frame = (function datascript$pull_api$pull_expand_reverse_frame(db,p__44982){\nvar vec__44983 = p__44982;\nvar seq__44984 = cljs.core.seq(vec__44983);\nvar first__44985 = cljs.core.first(seq__44984);\nvar seq__44984__$1 = cljs.core.next(seq__44984);\nvar frame = first__44985;\nvar frames = seq__44984__$1;\nreturn datascript.pull_api.expand_result(frames,datascript.pull_api.into_BANG_(new cljs.core.Keyword(null,\"expand-kvps\",\"expand-kvps\",44141154).cljs$core$IFn$_invoke$arity$1(frame),(function (){var or__4185__auto__ = datascript.pull_api.single_frame_result(new cljs.core.Keyword(\"datascript.pull-api\",\"expand-rev\",\"datascript.pull-api/expand-rev\",2143627459),frame);\nif(cljs.core.truth_(or__4185__auto__)){\nreturn or__4185__auto__;\n} else {\nreturn cljs.core.PersistentArrayMap.EMPTY;\n}\n})()));\n});\ndatascript.pull_api.pull_expand_frame = (function datascript$pull_api$pull_expand_frame(db,p__44986){\nvar vec__44987 = p__44986;\nvar seq__44988 = cljs.core.seq(vec__44987);\nvar first__44989 = cljs.core.first(seq__44988);\nvar seq__44988__$1 = cljs.core.next(seq__44988);\nvar frame = first__44989;\nvar frames = seq__44988__$1;\nvar temp__5733__auto__ = cljs.core.seq(new cljs.core.Keyword(null,\"datoms\",\"datoms\",-290874434).cljs$core$IFn$_invoke$arity$1(frame));\nif(temp__5733__auto__){\nvar datoms_by_attr = temp__5733__auto__;\nvar vec__44990 = cljs.core.first(datoms_by_attr);\nvar attr = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__44990,(0),null);\nvar datoms = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__44990,(1),null);\nvar opts = cljs.core.get.cljs$core$IFn$_invoke$arity$3(cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(frame,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"pattern\",\"pattern\",242135423),new cljs.core.Keyword(null,\"attrs\",\"attrs\",-2090668713)], null)),attr,cljs.core.PersistentArrayMap.EMPTY);\nreturn datascript.pull_api.pull_attr_datoms(db,attr,attr,new cljs.core.Keyword(null,\"eid\",\"eid\",559519930).cljs$core$IFn$_invoke$arity$1(frame),true,datoms,opts,cljs.core.conj.cljs$core$IFn$_invoke$arity$2(frames,cljs.core.update.cljs$core$IFn$_invoke$arity$3(frame,new cljs.core.Keyword(null,\"datoms\",\"datoms\",-290874434),cljs.core.rest)));\n} else {\nvar temp__5733__auto____$1 = cljs.core.not_empty(cljs.core.into.cljs$core$IFn$_invoke$arity$3(cljs.core.PersistentArrayMap.EMPTY,datascript.pull_api.filter_reverse_attrs,cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(frame,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"pattern\",\"pattern\",242135423),new cljs.core.Keyword(null,\"attrs\",\"attrs\",-2090668713)], null))));\nif(cljs.core.truth_(temp__5733__auto____$1)){\nvar rattrs = temp__5733__auto____$1;\nvar frame__$1 = cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic(frame,new cljs.core.Keyword(null,\"state\",\"state\",-1988618099),new cljs.core.Keyword(null,\"expand-rev\",\"expand-rev\",1249112650),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,\"expand-kvps\",\"expand-kvps\",44141154),new cljs.core.Keyword(null,\"kvps\",\"kvps\",65308317).cljs$core$IFn$_invoke$arity$1(frame),new cljs.core.Keyword(null,\"kvps\",\"kvps\",65308317),cljs.core.transient$(cljs.core.PersistentArrayMap.EMPTY)], 0));\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$variadic(frames,frame__$1,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([datascript.pull_api.expand_reverse_subpattern_frame(frame__$1,new cljs.core.Keyword(null,\"eid\",\"eid\",559519930).cljs$core$IFn$_invoke$arity$1(frame__$1),rattrs)], 0));\n} else {\nreturn datascript.pull_api.expand_result(frames,new cljs.core.Keyword(null,\"kvps\",\"kvps\",65308317).cljs$core$IFn$_invoke$arity$1(frame));\n}\n}\n});\ndatascript.pull_api.pull_wildcard_expand = (function datascript$pull_api$pull_wildcard_expand(db,frame,frames,eid,pattern){\nvar datoms = cljs.core.group_by((function (d){\nreturn d.a;\n}),datascript.db._datoms(db,new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [eid], null)));\nvar map__45000 = frame;\nvar map__45000__$1 = (((((!((map__45000 == null))))?(((((map__45000.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__45000.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__45000):map__45000);\nvar attr = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__45000__$1,new cljs.core.Keyword(null,\"attr\",\"attr\",-604132353));\nvar recursion = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__45000__$1,new cljs.core.Keyword(null,\"recursion\",\"recursion\",-749738765));\nvar rec = (function (){var G__45002 = recursion;\nif((!((attr == null)))){\nreturn datascript.pull_api.push_recursion(G__45002,attr,eid);\n} else {\nreturn G__45002;\n}\n})();\nreturn datascript.pull_api.pull_expand_frame(db,cljs.core.conj.cljs$core$IFn$_invoke$arity$variadic(frames,frame,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword(null,\"state\",\"state\",-1988618099),new cljs.core.Keyword(null,\"expand\",\"expand\",595248157),new cljs.core.Keyword(null,\"kvps\",\"kvps\",65308317),cljs.core.transient$(new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(\"db\",\"id\",\"db/id\",-1388397098),eid], null)),new cljs.core.Keyword(null,\"eid\",\"eid\",559519930),eid,new cljs.core.Keyword(null,\"pattern\",\"pattern\",242135423),pattern,new cljs.core.Keyword(null,\"datoms\",\"datoms\",-290874434),cljs.core.seq(datoms),new cljs.core.Keyword(null,\"recursion\",\"recursion\",-749738765),rec], null)], 0)));\n});\ndatascript.pull_api.pull_wildcard = (function datascript$pull_api$pull_wildcard(db,frame,frames){\nvar map__45003 = frame;\nvar map__45003__$1 = (((((!((map__45003 == null))))?(((((map__45003.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__45003.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__45003):map__45003);\nvar eid = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__45003__$1,new cljs.core.Keyword(null,\"eid\",\"eid\",559519930));\nvar pattern = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__45003__$1,new cljs.core.Keyword(null,\"pattern\",\"pattern\",242135423));\nvar or__4185__auto__ = datascript.pull_api.pull_seen_eid(frame,frames,eid);\nif(cljs.core.truth_(or__4185__auto__)){\nreturn or__4185__auto__;\n} else {\nreturn datascript.pull_api.pull_wildcard_expand(db,frame,frames,eid,pattern);\n}\n});\ndatascript.pull_api.pull_pattern_frame = (function datascript$pull_api$pull_pattern_frame(db,p__45006){\nwhile(true){\nvar vec__45007 = p__45006;\nvar seq__45008 = cljs.core.seq(vec__45007);\nvar first__45009 = cljs.core.first(seq__45008);\nvar seq__45008__$1 = cljs.core.next(seq__45008);\nvar frame = first__45009;\nvar frames = seq__45008__$1;\nvar temp__5733__auto__ = cljs.core.seq(new cljs.core.Keyword(null,\"eids\",\"eids\",1546550700).cljs$core$IFn$_invoke$arity$1(frame));\nif(temp__5733__auto__){\nvar eids = temp__5733__auto__;\nif(cljs.core.truth_(new cljs.core.Keyword(null,\"wildcard?\",\"wildcard?\",-686044101).cljs$core$IFn$_invoke$arity$1(frame))){\nreturn datascript.pull_api.pull_wildcard(db,cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic(frame,new cljs.core.Keyword(null,\"specs\",\"specs\",1426570741),cljs.core.PersistentVector.EMPTY,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,\"eid\",\"eid\",559519930),cljs.core.first(eids),new cljs.core.Keyword(null,\"wildcard?\",\"wildcard?\",-686044101),false], 0)),frames);\n} else {\nvar temp__5733__auto____$1 = cljs.core.seq(new cljs.core.Keyword(null,\"specs\",\"specs\",1426570741).cljs$core$IFn$_invoke$arity$1(frame));\nif(temp__5733__auto____$1){\nvar specs = temp__5733__auto____$1;\nvar spec = cljs.core.first(specs);\nvar pattern = new cljs.core.Keyword(null,\"pattern\",\"pattern\",242135423).cljs$core$IFn$_invoke$arity$1(frame);\nvar new_frames = cljs.core.conj.cljs$core$IFn$_invoke$arity$2(frames,cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(frame,new cljs.core.Keyword(null,\"specs\",\"specs\",1426570741),cljs.core.rest(specs)));\nreturn datascript.pull_api.pull_attr(db,spec,cljs.core.first(eids),new_frames);\n} else {\nvar G__45061 = db;\nvar G__45062 = cljs.core.conj.cljs$core$IFn$_invoke$arity$2(frames,datascript.pull_api.reset_frame(frame,cljs.core.rest(eids),cljs.core.not_empty(cljs.core.persistent_BANG_(new cljs.core.Keyword(null,\"kvps\",\"kvps\",65308317).cljs$core$IFn$_invoke$arity$1(frame)))));\ndb = G__45061;\np__45006 = G__45062;\ncontinue;\n}\n}\n} else {\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$2(frames,cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(frame,new cljs.core.Keyword(null,\"state\",\"state\",-1988618099),new cljs.core.Keyword(null,\"done\",\"done\",-889844188)));\n}\nbreak;\n}\n});\ndatascript.pull_api.pull_pattern = (function datascript$pull_api$pull_pattern(db,frames){\nwhile(true){\nvar G__45010 = new cljs.core.Keyword(null,\"state\",\"state\",-1988618099).cljs$core$IFn$_invoke$arity$1(cljs.core.first(frames));\nvar G__45010__$1 = (((G__45010 instanceof cljs.core.Keyword))?G__45010.fqn:null);\nswitch (G__45010__$1) {\ncase \"expand\":\nvar G__45064 = db;\nvar G__45065 = datascript.pull_api.pull_expand_frame(db,frames);\ndb = G__45064;\nframes = G__45065;\ncontinue;\n\nbreak;\ncase \"expand-rev\":\nvar G__45066 = db;\nvar G__45067 = datascript.pull_api.pull_expand_reverse_frame(db,frames);\ndb = G__45066;\nframes = G__45067;\ncontinue;\n\nbreak;\ncase \"pattern\":\nvar G__45069 = db;\nvar G__45070 = datascript.pull_api.pull_pattern_frame(db,frames);\ndb = G__45069;\nframes = G__45070;\ncontinue;\n\nbreak;\ncase \"recursion\":\nvar G__45071 = db;\nvar G__45072 = datascript.pull_api.pull_recursion_frame(db,frames);\ndb = G__45071;\nframes = G__45072;\ncontinue;\n\nbreak;\ncase \"done\":\nvar vec__45011 = frames;\nvar seq__45012 = cljs.core.seq(vec__45011);\nvar first__45013 = cljs.core.first(seq__45012);\nvar seq__45012__$1 = cljs.core.next(seq__45012);\nvar f = first__45013;\nvar remaining = seq__45012__$1;\nvar result = (function (){var G__45015 = cljs.core.persistent_BANG_(new cljs.core.Keyword(null,\"results\",\"results\",-1134170113).cljs$core$IFn$_invoke$arity$1(f));\nif(cljs.core.not(new cljs.core.Keyword(null,\"multi?\",\"multi?\",-749311069).cljs$core$IFn$_invoke$arity$1(f))){\nreturn cljs.core.first(G__45015);\n} else {\nreturn G__45015;\n}\n})();\nif(cljs.core.seq(remaining)){\nvar G__45073 = db;\nvar G__45074 = cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs.core.rest(remaining),(function (){var G__45016 = cljs.core.first(remaining);\nif(cljs.core.truth_(result)){\nreturn cljs.core.update.cljs$core$IFn$_invoke$arity$5(G__45016,new cljs.core.Keyword(null,\"kvps\",\"kvps\",65308317),cljs.core.assoc_BANG_,new cljs.core.Keyword(null,\"attr\",\"attr\",-604132353).cljs$core$IFn$_invoke$arity$1(f),result);\n} else {\nreturn G__45016;\n}\n})());\ndb = G__45073;\nframes = G__45074;\ncontinue;\n} else {\nreturn result;\n}\n\nbreak;\ndefault:\nthrow (new Error([\"No matching clause: \",cljs.core.str.cljs$core$IFn$_invoke$arity$1(G__45010__$1)].join('')));\n\n}\nbreak;\n}\n});\ndatascript.pull_api.pull_spec = (function datascript$pull_api$pull_spec(db,pattern,eids,multi_QMARK_){\nvar eids__$1 = cljs.core.into.cljs$core$IFn$_invoke$arity$3(cljs.core.PersistentVector.EMPTY,cljs.core.map.cljs$core$IFn$_invoke$arity$1((function (p1__45021_SHARP_){\nreturn datascript.db.entid_strict(db,p1__45021_SHARP_);\n})),eids);\nreturn datascript.pull_api.pull_pattern(db,(new cljs.core.List(null,datascript.pull_api.initial_frame(pattern,eids__$1,multi_QMARK_),null,(1),null)));\n});\ndatascript.pull_api.pull = (function datascript$pull_api$pull(db,selector,eid){\nif(datascript.db.db_QMARK_(db)){\n} else {\nthrow (new Error(\"Assert failed: (db/db? db)\"));\n}\n\nreturn datascript.pull_api.pull_spec(db,datascript.pull_parser.parse_pull(selector),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [eid], null),false);\n});\ndatascript.pull_api.pull_many = (function datascript$pull_api$pull_many(db,selector,eids){\nif(datascript.db.db_QMARK_(db)){\n} else {\nthrow (new Error(\"Assert failed: (db/db? db)\"));\n}\n\nreturn datascript.pull_api.pull_spec(db,datascript.pull_parser.parse_pull(selector),eids,true);\n});\n","~:ns-info",["^ ","~:rename-macros",null,"~:renames",["^ "],"~:meta",["^ ","~:file","datascript/pull_api.cljc","~:line",1,"~:column",14,"~:end-line",1,"~:end-column",33,"~:no-doc",true],"~:ns-aliases",["^ ","~$cljs.loader","~$shadow.loader","~$react","~$module$node_modules$react$index","~$create-react-class","~$module$node_modules$create_react_class$index","~$react-dom","~$module$node_modules$react_dom$index","~$react-flip-move","~$module$node_modules$react_flip_move$dist$react_flip_move_cjs","~$clojure.pprint","~$cljs.pprint","~$clojure.repl","~$cljs.repl","~$clojure.spec.alpha","~$cljs.spec.alpha"],"~:use-macros",null,"~:excludes",["~#set",[]],"~:name","~$datascript.pull-api","~:op","~:ns","~:imports",null,"~:requires",["^ ","~$datascript.db","^V","~$db","^V","~$datascript.pull-parser","^X","~$dpp","^X","~$cljs.core","^Z","~$goog","^["],"~:seen",["^O",["~:require"]],"~:uses",["^ ","~$PullSpec","^X"],"~:require-macros",["^ ","^Z","^Z","^V","^V","^W","^V"],"~:form",["~#list",["~$ns","^Q",["^16",["^11",["^V","~:as","^W"],["^X","^18","^Y","~:refer",["^13"]]]]]],"~:flags",["^ ","^11",["^O",[]]],"~:js-deps",["^ "],"~:deps",["^[","^Z","^V","^X"]],"^S","^Q","~:resource-id",["~:shadow.build.classpath/resource","datascript/pull_api.cljc"],"~:compiled-at",1578175836805,"~:resource-name","datascript/pull_api.cljc","~:warnings",[],"~:source","(ns ^:no-doc datascript.pull-api\n  (:require\n    [datascript.db :as db]\n    [datascript.pull-parser :as dpp #?@(:cljs [:refer [PullSpec]])])\n    #?(:clj\n      (:import\n        [datascript.db Datom]\n        [datascript.pull_parser PullSpec])))\n\n(defn- into!\n  [transient-coll items]\n  (reduce conj! transient-coll items))\n\n(def ^:private ^:const +default-limit+ 1000)\n\n(defn- initial-frame\n  [pattern eids multi?]\n  {:state     :pattern\n   :pattern   pattern\n   :wildcard? (:wildcard? pattern)\n   :specs     (-> pattern :attrs seq)\n   :results   (transient [])\n   :kvps      (transient {})\n   :eids      eids\n   :multi?    multi?\n   :recursion {:depth {} :seen #{}}})\n\n(defn- subpattern-frame\n  [pattern eids multi? attr]\n  (assoc (initial-frame pattern eids multi?) :attr attr))\n\n(defn- reset-frame\n  [frame eids kvps]\n  (let [pattern (:pattern frame)]\n    (assoc frame\n           :eids      eids\n           :specs     (seq (:attrs pattern))\n           :wildcard? (:wildcard? pattern)\n           :kvps      (transient {})\n           :results   (cond-> (:results frame)\n                        (seq kvps) (conj! kvps)))))\n\n(defn- push-recursion\n  [rec attr eid]\n  (let [{:keys [depth seen]} rec]\n    (assoc rec\n           :depth (update depth attr (fnil inc 0))\n           :seen (conj seen eid))))\n\n(defn- seen-eid?\n  [frame eid]\n  (-> frame\n      (get-in [:recursion :seen] #{})\n      (contains? eid)))\n\n(defn- pull-seen-eid\n  [frame frames eid]\n  (when (seen-eid? frame eid)\n    (conj frames (update frame :results conj! {:db/id eid}))))\n\n(defn- single-frame-result\n  [key frame]\n  (some-> (:kvps frame) persistent! (get key)))\n\n(defn- recursion-result [frame]\n  (single-frame-result ::recursion frame))\n\n(defn- recursion-frame\n  [parent eid]\n  (let [attr (:attr parent)\n        rec  (push-recursion (:recursion parent) attr eid)]\n    (assoc (subpattern-frame (:pattern parent) [eid] false ::recursion)\n           :recursion rec)))\n\n(defn- pull-recursion-frame\n  [db [frame & frames]]\n  (if-let [eids (seq (:eids frame))]\n    (let [frame  (reset-frame frame (rest eids) (recursion-result frame))\n          eid    (first eids)]\n      (or (pull-seen-eid frame frames eid)\n          (conj frames frame (recursion-frame frame eid))))\n    (let [kvps    (recursion-result frame)\n          results (cond-> (:results frame)\n                    (seq kvps) (conj! kvps))]\n      (conj frames (assoc frame :state :done :results results)))))\n\n(defn- recurse-attr\n  [db attr multi? eids eid parent frames]\n  (let [{:keys [recursion pattern]} parent\n        depth  (-> recursion (get :depth) (get attr 0))]\n    (if (-> pattern :attrs (get attr) :recursion (= depth))\n      (conj frames parent)\n      (pull-recursion-frame\n       db\n       (conj frames parent\n             {:state :recursion :pattern pattern\n              :attr attr :multi? multi? :eids eids\n              :recursion recursion\n              :results (transient [])})))))\n\n(let [pattern (PullSpec. true {})]\n  (defn- expand-frame\n    [parent eid attr-key multi? eids]\n    (let [rec (push-recursion (:recursion parent) attr-key eid)]\n      (-> pattern\n          (subpattern-frame eids multi? attr-key)\n          (assoc :recursion rec)))))\n\n(defn- pull-attr-datoms\n  [db attr-key attr eid forward? datoms opts [parent & frames]]\n  (let [limit (get opts :limit +default-limit+)\n        attr-key (or (:as opts) attr-key)\n        found (not-empty\n               (cond->> datoms\n                 limit (into [] (take limit))))]\n    (if found\n      (let [ref?       (db/ref? db attr)\n            component? (and ref? (db/component? db attr))\n            multi?     (if forward? (db/multival? db attr) (not component?))\n            datom-val  (if forward? (fn [d] (.-v ^Datom d)) (fn [d] (.-e ^Datom d)))]\n        (cond\n          (contains? opts :subpattern)\n          (->> (subpattern-frame (:subpattern opts)\n                                 (mapv datom-val found)\n                                 multi? attr-key)\n               (conj frames parent))\n\n          (contains? opts :recursion)\n          (recurse-attr db attr-key multi?\n                        (mapv datom-val found)\n                        eid parent frames)\n\n          (and component? forward?)\n          (->> found\n               (mapv datom-val)\n               (expand-frame parent eid attr-key multi?)\n               (conj frames parent))\n          \n          :else \n          (let [as-value  (cond->> datom-val\n                            ref? (comp #(hash-map :db/id %)))\n                single?   (not multi?)]\n            (->> (cond-> (into [] (map as-value) found)\n                   single? first)\n                 (update parent :kvps assoc! attr-key)\n                 (conj frames)))))\n      (->> (cond-> parent\n             (contains? opts :default)\n             (update :kvps assoc! attr-key (:default opts)))\n           (conj frames)))))\n\n(defn- pull-attr\n  [db spec eid frames]\n  (let [[attr-key opts] spec]\n    (if (= :db/id attr-key)\n      (if (not-empty (db/-datoms db :eavt [eid]))\n        (conj (rest frames)\n              (update (first frames) :kvps assoc! :db/id eid))\n        frames)\n      (let [attr     (:attr opts)\n            forward? (= attr-key attr)\n            results  (if forward?\n                       (db/-datoms db :eavt [eid attr])\n                       (db/-datoms db :avet [attr eid]))]\n        (pull-attr-datoms db attr-key attr eid forward?\n                          results opts frames)))))\n\n(def ^:private filter-reverse-attrs\n  (filter (fn [[k v]] (not= k (:attr v)))))\n\n(defn- expand-reverse-subpattern-frame\n  [parent eid rattrs]\n  (-> (:pattern parent)\n      (assoc :attrs rattrs :wildcard? false)\n      (subpattern-frame [eid] false ::expand-rev)))\n\n(defn- expand-result\n  [frames kvps]\n  (->> kvps\n       (persistent!)\n       (update (first frames) :kvps into!)\n       (conj (rest frames))))\n\n(defn- pull-expand-reverse-frame\n  [db [frame & frames]]\n  (->> (or (single-frame-result ::expand-rev frame) {})\n       (into! (:expand-kvps frame))\n       (expand-result frames)))\n\n(defn- pull-expand-frame\n  [db [frame & frames]]\n  (if-let [datoms-by-attr (seq (:datoms frame))]\n    (let [[attr datoms] (first datoms-by-attr)\n          opts          (-> frame\n                            (get-in [:pattern :attrs])\n                            (get attr {}))]\n      (pull-attr-datoms db attr attr (:eid frame) true datoms opts\n                        (conj frames (update frame :datoms rest))))\n    (if-let [rattrs (->> (get-in frame [:pattern :attrs])\n                         (into {} filter-reverse-attrs)\n                         not-empty)]\n      (let [frame  (assoc frame\n                          :state       :expand-rev\n                          :expand-kvps (:kvps frame)\n                          :kvps        (transient {}))]\n        (->> rattrs\n             (expand-reverse-subpattern-frame frame (:eid frame))\n             (conj frames frame)))\n      (expand-result frames (:kvps frame)))))\n\n(defn- pull-wildcard-expand\n  [db frame frames eid pattern]\n  (let [datoms (group-by (fn [d] (.-a ^Datom d)) (db/-datoms db :eavt [eid]))\n        {:keys [attr recursion]} frame\n        rec (cond-> recursion\n              (some? attr) (push-recursion attr eid))]\n    (->> {:state :expand :kvps (transient {:db/id eid})\n          :eid eid :pattern pattern :datoms (seq datoms)\n          :recursion rec}\n         (conj frames frame)\n         (pull-expand-frame db))))\n\n(defn- pull-wildcard\n  [db frame frames]\n  (let [{:keys [eid pattern]} frame]\n    (or (pull-seen-eid frame frames eid)\n        (pull-wildcard-expand db frame frames eid pattern))))\n\n(defn- pull-pattern-frame\n  [db [frame & frames]]\n  (if-let [eids (seq (:eids frame))]\n    (if (:wildcard? frame)\n      (pull-wildcard db\n                     (assoc frame\n                            :specs []\n                            :eid (first eids)\n                            :wildcard? false)\n                     frames)\n      (if-let [specs (seq (:specs frame))]\n        (let [spec       (first specs)\n              pattern    (:pattern frame)\n              new-frames (conj frames (assoc frame :specs (rest specs)))]\n          (pull-attr db spec (first eids) new-frames))\n        (->> frame :kvps persistent! not-empty\n             (reset-frame frame (rest eids))\n             (conj frames)\n             (recur db))))\n    (conj frames (assoc frame :state :done))))\n\n(defn- pull-pattern\n  [db frames]\n  (case (:state (first frames))\n    :expand     (recur db (pull-expand-frame db frames))\n    :expand-rev (recur db (pull-expand-reverse-frame db frames))\n    :pattern    (recur db (pull-pattern-frame db frames))\n    :recursion  (recur db (pull-recursion-frame db frames))\n    :done       (let [[f & remaining] frames\n                      result (cond-> (persistent! (:results f))\n                               (not (:multi? f)) first)]\n                  (if (seq remaining)\n                    (->> (cond-> (first remaining)\n                           result (update :kvps assoc! (:attr f) result))\n                         (conj (rest remaining))\n                         (recur db))\n                    result))))\n\n(defn pull-spec\n  [db pattern eids multi?]\n  (let [eids (into [] (map #(db/entid-strict db %)) eids)]\n    (pull-pattern db (list (initial-frame pattern eids multi?)))))\n\n(defn pull [db selector eid]\n  {:pre [(db/db? db)]}\n  (pull-spec db (dpp/parse-pull selector) [eid] false))\n\n(defn pull-many [db selector eids]\n  {:pre [(db/db? db)]}\n  (pull-spec db (dpp/parse-pull selector) eids true))\n","~:reader-features",["^O",["~:cljs"]],"~:cljc",true,"~:source-map-compact",["^ ","mappings","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","names",["datascript.pull-api/into!","transient-coll","items","cljs.core.reduce.cljs$core$IFn$_invoke$arity$3","cljs.core/conj!","datascript.pull-api/+default-limit+","datascript.pull-api/initial-frame","pattern","eids","multi?","cljs.core/seq","cljs.core/transient","datascript.pull-api/subpattern-frame","attr","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","datascript.pull-api/reset-frame","frame","kvps","cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic","G__44930","cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2","datascript.pull-api/push-recursion","rec","eid","map__44931","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","depth","seen","cljs.core.update.cljs$core$IFn$_invoke$arity$3","cljs.core.fnil.cljs$core$IFn$_invoke$arity$2","cljs.core/inc","cljs.core.conj.cljs$core$IFn$_invoke$arity$2","datascript.pull-api/seen-eid?","cljs.core.get_in.cljs$core$IFn$_invoke$arity$3","cljs.core/contains?","datascript.pull-api/pull-seen-eid","frames","cljs.core.update.cljs$core$IFn$_invoke$arity$4","datascript.pull-api/single-frame-result","key","G__44934","cljs.core/persistent!","datascript.pull-api/recursion-result","datascript.pull-api/recursion-frame","parent","p__44945","vec__44946","seq__44947","first__44948","cljs.core/first","cljs.core/next","datascript.pull-api/pull-recursion-frame","db","temp__5733__auto__","cljs.core/rest","or__4185__auto__","cljs.core.conj.cljs$core$IFn$_invoke$arity$variadic","results","G__44951","datascript.pull-api/recurse-attr","map__44952","recursion","cljs.core.get.cljs$core$IFn$_invoke$arity$3","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","datascript.pull-parser/PullSpec","datascript.pull-api/expand-frame","attr-key","p__44956","vec__44957","seq__44958","first__44959","datascript.pull-api/pull-attr-datoms","forward?","datoms","opts","limit","found","cljs.core/not-empty","G__44962","cljs.core.into.cljs$core$IFn$_invoke$arity$3","cljs.core.take.cljs$core$IFn$_invoke$arity$1","ref?","datascript.db/ref?","component?","datascript.db/component?","datascript.db/multival?","datom-val","d","cljs.core.mapv.cljs$core$IFn$_invoke$arity$2","as-value","G__44967","p1__44955#","cljs.core.comp.cljs$core$IFn$_invoke$arity$2","cljs.core/PersistentHashMap","single?","G__44971","cljs.core.map.cljs$core$IFn$_invoke$arity$1","cljs.core.update.cljs$core$IFn$_invoke$arity$5","cljs.core/assoc!","G__44973","datascript.pull-api/pull-attr","spec","vec__44975","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","datascript.db/-datoms","datascript.pull-api/filter-reverse-attrs","cljs.core.filter.cljs$core$IFn$_invoke$arity$1","p__44978","vec__44979","k","v","cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2","datascript.pull-api/expand-reverse-subpattern-frame","rattrs","datascript.pull-api/expand-result","p__44982","vec__44983","seq__44984","first__44985","datascript.pull-api/pull-expand-reverse-frame","p__44986","vec__44987","seq__44988","first__44989","datascript.pull-api/pull-expand-frame","datoms-by-attr","vec__44990","cljs.core.get_in.cljs$core$IFn$_invoke$arity$2","datascript.pull-api/pull-wildcard-expand","map__45000","cljs.core/group-by","G__45002","datascript.pull-api/pull-wildcard","map__45003","p__45006","vec__45007","seq__45008","first__45009","datascript.pull-api/pull-pattern-frame","specs","new-frames","datascript.pull-api/pull-pattern","G__45010","cljs.core/Keyword","js/Error","vec__45011","seq__45012","first__45013","f","remaining","result","G__45015","cljs.core/not","G__45016","datascript.pull-api/pull-spec","p1__45021#","datascript.db/entid-strict","cljs.core/List","datascript.pull-api/pull","selector","datascript.db/db?","datascript.pull-parser/parse-pull","datascript.pull-api/pull-many"]]],"~:cache-keys",["~#cmap",[["^1>","datascript/db.cljc"],[1578170241590,"~:shadow.build.compiler/resolve",["^ ","~:require-id",null,"~:deps-ids",["^O",[]],"~:deps-syms",["^[","^Z","~$goog.array","~$clojure.walk","~$clojure.data","~$me.tonsky.persistent-sorted-set","~$me.tonsky.persistent-sorted-set.arrays"]]],["^1>","goog/dom/tagname.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","~$goog.dom.HtmlElement"]]],["^1>","goog/math/math.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1O","~$goog.asserts"]]],["^1>","goog/html/trustedtypes.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/labs/useragent/browser.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1O","~$goog.labs.userAgent.util","~$goog.object","~$goog.string.internal"]]],["^1>","goog/html/safeurl.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1U","~$goog.fs.url","~$goog.html.TrustedResourceUrl","~$goog.i18n.bidi.Dir","~$goog.i18n.bidi.DirectionalString","~$goog.string.Const","~$goog.string.TypedString","^1X"]]],["^1>","goog/array/array.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1U"]]],["^1>","goog/debug/error.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/dom/nodetype.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/string/typedstring.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/object/object.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/dom/asserts.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1U"]]],"~:SHADOW-TIMESTAMP",[1577302212000,1574477009000],["^1>","goog/math/long.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1U","~$goog.reflect"]]],["^1>","goog/html/trustedresourceurl.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1U","~$goog.html.trustedtypes","^1[","^20","^21","^22"]]],["^1>","goog/string/internal.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","datascript/pull_api.cljc"],[1578170241590,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^Z","^V","^X"]]],["^1>","goog/functions/functions.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/html/safestyle.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1O","^1U","~$goog.html.SafeUrl","^21","^22","^1X"]]],["^1>","goog/dom/safe.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1U","~$goog.dom.asserts","~$goog.functions","~$goog.html.SafeHtml","~$goog.html.SafeScript","~$goog.html.SafeStyle","^26","^1Z","~$goog.html.uncheckedconversions","^21","^1X"]]],["^1>","clojure/walk.cljs"],[1574477009594,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^Z"]]],["^1>","goog/structs/map.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","~$goog.iter.Iterator","~$goog.iter.StopIteration"]]],["^1>","goog/html/safehtml.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1O","^1U","~$goog.dom.TagName","~$goog.dom.tags","^2:","^2;","~$goog.html.SafeStyleSheet","^26","^1Z","^25","^1[","^20","~$goog.labs.userAgent.browser","^1W","^21","^22","^1X"]]],["^1>","goog/dom/tags.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1W"]]],["^1>","me/tonsky/persistent_sorted_set/arrays.cljc"],[1578170241726,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^Z","~$clojure.string"]]],["^1>","goog/asserts/asserts.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","~$goog.debug.Error","~$goog.dom.NodeType"]]],["^1>","me/tonsky/persistent_sorted_set.cljs"],[1578170241726,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^Z","^1S"]]],["^1>","goog/uri/uri.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1O","^1U","~$goog.string","~$goog.structs","~$goog.structs.Map","~$goog.uri.utils","~$goog.uri.utils.ComponentIndex","~$goog.uri.utils.StandardQueryParam"]]],["^1>","goog/i18n/bidi.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/fs/url.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/base.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",[]]],["^1>","goog/structs/structs.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1O","^1W"]]],["^1>","clojure/string.cljs"],[1574477009594,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^Z","^2F","~$goog.string.StringBuffer"]]],["^1>","datascript/pull_parser.cljc"],[1578170241590,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^Z","^V"]]],["^1>","goog/string/string.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","~$goog.dom.safe","^2<","^21","^1X"]]],["^1>","clojure/data.cljs"],[1574477009594,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^Z","~$clojure.set"]]],["^1>","goog/reflect/reflect.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/labs/useragent/util.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1X"]]],["^1>","goog/string/stringbuffer.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/iter/iter.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1O","^1U","^28","~$goog.math"]]],["^1>","goog/html/uncheckedconversions.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1U","^29","^2:","^2;","^2A","^26","^1Z","^21","^1X"]]],["^1>","goog/dom/htmlelement.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","cljs/core.cljs"],[1574477009594,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["~$goog.math.Long","~$goog.math.Integer","^2F","^1W","^1O","~$goog.Uri","^2L"]]],["^1>","goog/html/safescript.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1U","^25","^21","^22"]]],["^1>","goog/html/safestylesheet.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1O","^1U","^2;","^1W","^21","^22","^1X"]]],["^1>","goog/math/integer.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^24"]]],["^1>","clojure/set.cljs"],[1574477009594,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^Z"]]],["^1>","goog/uri/utils.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1O","^1U","^2F"]]],["^1>","goog/string/const.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1U","^22"]]]]],"~:clj-info",["^ ","jar:file:/Users/lambda_school_loaner_94/.m2/repository/persistent-sorted-set/persistent-sorted-set/0.1.2/persistent-sorted-set-0.1.2.jar!/me/tonsky/persistent_sorted_set.clj",1578170241000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/env.cljc",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/util.cljc",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/tools.reader/1.3.2/tools.reader-1.3.2.jar!/clojure/tools/reader/reader_types.clj",1559507883000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/core.cljc",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojure/1.10.1/clojure-1.10.1.jar!/clojure/edn.clj",1559876774000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/tagged_literals.cljc",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/tools.reader/1.3.2/tools.reader-1.3.2.jar!/clojure/tools/reader/default_data_readers.clj",1559507883000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojure/1.10.1/clojure-1.10.1.jar!/clojure/string.clj",1559876774000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojure/1.10.1/clojure-1.10.1.jar!/clojure/pprint.clj",1559876774000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/externs.clj",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojure/1.10.1/clojure-1.10.1.jar!/clojure/java/io.clj",1559876774000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/tools.reader/1.3.2/tools.reader-1.3.2.jar!/clojure/tools/reader/impl/inspect.clj",1559507883000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/source_map.clj",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojure/1.10.1/clojure-1.10.1.jar!/clojure/set.clj",1559876774000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/persistent-sorted-set/persistent-sorted-set/0.1.2/persistent-sorted-set-0.1.2.jar!/me/tonsky/persistent_sorted_set/arrays.cljc",1578170241000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/source_map/base64_vlq.clj",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/tools.reader/1.3.2/tools.reader-1.3.2.jar!/clojure/tools/reader.clj",1559507883000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/source_map/base64.clj",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojure/1.10.1/clojure-1.10.1.jar!/clojure/instant.clj",1559876774000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojure/1.10.1/clojure-1.10.1.jar!/clojure/core.clj",1559876774000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/compiler.cljc",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/data.json/0.2.6/data.json-0.2.6.jar!/clojure/data/json.clj",1556312825000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/datascript/datascript/0.18.8/datascript-0.18.8.jar!/datascript/db.cljc",1578170241000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/js_deps.cljc",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/analyzer.cljc",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/tools.reader/1.3.2/tools.reader-1.3.2.jar!/clojure/tools/reader/impl/errors.clj",1559507883000],"~:analyzer",["^ ","^3",null,"^4",["^ "],"^5",["^ ","^6","datascript/pull_api.cljc","^7",1,"^8",14,"^9",1,"^:",33,"^;",true],"^<",["^ ","^=","^>","^?","^@","^A","^B","^C","^D","^E","^F","^G","^H","^I","^J","^K","^L"],"^M",null,"^N",["^O",[]],"^P","^Q","^T",null,"^U",["^ ","^V","^V","^W","^V","^X","^X","^Y","^X","^Z","^Z","^[","^["],"^10",["^O",["^11"]],"~:shadow/js-access-global",["^O",["Error"]],"^12",["^ ","^13","^X"],"~:defs",["^ ","~$push-recursion",["^ ","~:protocol-inline",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",43,"^8",8,"^9",43,"^:",22,"~:private",true,"~:arglists",["^16",["~$quote",["^16",[["~$rec","~$attr","~$eid"]]]]]],"^3H",true,"^P","~$datascript.pull-api/push-recursion","^6","datascript/pull_api.cljc","^:",22,"~:method-params",["^16",[["^3K","^3L","^3M"]]],"~:protocol-impl",null,"~:arglists-meta",["^16",[null,null]],"^8",1,"~:variadic?",false,"^7",43,"~:ret-tag",["^O",["~$clj","~$any"]],"^9",43,"~:max-fixed-arity",3,"~:fn-var",true,"^3I",["^16",["^3J",["^16",[["^3K","^3L","^3M"]]]]]],"~$pull-expand-frame",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",190,"^8",8,"^9",190,"^:",25,"^3H",true,"^3I",["^16",["^3J",["^16",[["^W",["~$frame","~$&","~$frames"]]]]]]],"^3H",true,"^P","~$datascript.pull-api/pull-expand-frame","^6","datascript/pull_api.cljc","^:",25,"^3O",["^16",[["^W","~$p__44986"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",190,"^3S","^3T","^9",190,"^3V",2,"^3W",true,"^3I",["^16",["^3J",["^16",[["^W",["^3Y","~$&","^3Z"]]]]]]],"~$pull",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",272,"^8",7,"^9",272,"^:",11,"^3I",["^16",["^3J",["^16",[["^W","~$selector","^3M"]]]]]],"^P","~$datascript.pull-api/pull","^6","datascript/pull_api.cljc","^:",11,"^3O",["^16",[["^W","^42","^3M"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",272,"^3S","^3U","^9",272,"^3V",3,"^3W",true,"^3I",["^16",["^3J",["^16",[["^W","^42","^3M"]]]]]],"~$recursion-result",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",65,"^8",8,"^9",65,"^:",24,"^3H",true,"^3I",["^16",["^3J",["^16",[["^3Y"]]]]]],"^3H",true,"^P","~$datascript.pull-api/recursion-result","^6","datascript/pull_api.cljc","^:",24,"^3O",["^16",[["^3Y"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",65,"^3S",["^O",["^3U","~$clj-nil"]],"^9",65,"^3V",1,"^3W",true,"^3I",["^16",["^3J",["^16",[["^3Y"]]]]]],"~$single-frame-result",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",61,"^8",8,"^9",61,"^:",27,"^3H",true,"^3I",["^16",["^3J",["^16",[["~$key","^3Y"]]]]]],"^3H",true,"^P","~$datascript.pull-api/single-frame-result","^6","datascript/pull_api.cljc","^:",27,"^3O",["^16",[["^48","^3Y"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",61,"^3S",["^O",["^3U","^46"]],"^9",61,"^3V",2,"^3W",true,"^3I",["^16",["^3J",["^16",[["^48","^3Y"]]]]]],"~$pull-expand-reverse-frame",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",184,"^8",8,"^9",184,"^:",33,"^3H",true,"^3I",["^16",["^3J",["^16",[["^W",["^3Y","~$&","^3Z"]]]]]]],"^3H",true,"^P","~$datascript.pull-api/pull-expand-reverse-frame","^6","datascript/pull_api.cljc","^:",33,"^3O",["^16",[["^W","~$p__44982"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",184,"^3S","^3T","^9",184,"^3V",2,"^3W",true,"^3I",["^16",["^3J",["^16",[["^W",["^3Y","~$&","^3Z"]]]]]]],"~$pull-attr-datoms",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",109,"^8",8,"^9",109,"^:",24,"^3H",true,"^3I",["^16",["^3J",["^16",[["^W","~$attr-key","^3L","^3M","~$forward?","~$datoms","~$opts",["~$parent","~$&","^3Z"]]]]]]],"^3H",true,"^P","~$datascript.pull-api/pull-attr-datoms","^6","datascript/pull_api.cljc","^:",24,"^3O",["^16",[["^W","^4>","^3L","^3M","^4?","^4@","^4A","~$p__44956"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",109,"^3S","^3T","^9",109,"^3V",8,"^3W",true,"^3I",["^16",["^3J",["^16",[["^W","^4>","^3L","^3M","^4?","^4@","^4A",["^4B","~$&","^3Z"]]]]]]],"~$pull-many",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",276,"^8",7,"^9",276,"^:",16,"^3I",["^16",["^3J",["^16",[["^W","^42","~$eids"]]]]]],"^P","~$datascript.pull-api/pull-many","^6","datascript/pull_api.cljc","^:",16,"^3O",["^16",[["^W","^42","^4F"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",276,"^3S","^3U","^9",276,"^3V",3,"^3W",true,"^3I",["^16",["^3J",["^16",[["^W","^42","^4F"]]]]]],"~$pull-pattern-frame",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",229,"^8",8,"^9",229,"^:",26,"^3H",true,"^3I",["^16",["^3J",["^16",[["^W",["^3Y","~$&","^3Z"]]]]]]],"^3H",true,"^P","~$datascript.pull-api/pull-pattern-frame","^6","datascript/pull_api.cljc","^:",26,"^3O",["^16",[["^W","~$p__45006"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",229,"^3S",["^O",[null,"^3T"]],"^9",229,"^3V",2,"^3W",true,"^3I",["^16",["^3J",["^16",[["^W",["^3Y","~$&","^3Z"]]]]]]],"~$pull-wildcard-expand",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",211,"^8",8,"^9",211,"^:",28,"^3H",true,"^3I",["^16",["^3J",["^16",[["^W","^3Y","^3Z","^3M","~$pattern"]]]]]],"^3H",true,"^P","~$datascript.pull-api/pull-wildcard-expand","^6","datascript/pull_api.cljc","^:",28,"^3O",["^16",[["^W","^3Y","^3Z","^3M","^4L"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",211,"^3S","^3T","^9",211,"^3V",5,"^3W",true,"^3I",["^16",["^3J",["^16",[["^W","^3Y","^3Z","^3M","^4L"]]]]]],"~$expand-reverse-subpattern-frame",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",171,"^8",8,"^9",171,"^:",39,"^3H",true,"^3I",["^16",["^3J",["^16",[["^4B","^3M","~$rattrs"]]]]]],"^3H",true,"^P","~$datascript.pull-api/expand-reverse-subpattern-frame","^6","datascript/pull_api.cljc","^:",39,"^3O",["^16",[["^4B","^3M","^4O"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",171,"^3S",["^O",["^3T","^3U"]],"^9",171,"^3V",3,"^3W",true,"^3I",["^16",["^3J",["^16",[["^4B","^3M","^4O"]]]]]],"~$pull-attr",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",152,"^8",8,"^9",152,"^:",17,"^3H",true,"^3I",["^16",["^3J",["^16",[["^W","~$spec","^3M","^3Z"]]]]]],"^3H",true,"^P","~$datascript.pull-api/pull-attr","^6","datascript/pull_api.cljc","^:",17,"^3O",["^16",[["^W","^4R","^3M","^3Z"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",152,"^3S",["^O",[null,"^3T"]],"^9",152,"^3V",4,"^3W",true,"^3I",["^16",["^3J",["^16",[["^W","^4R","^3M","^3Z"]]]]]],"~$recurse-attr",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",87,"^8",8,"^9",87,"^:",20,"^3H",true,"^3I",["^16",["^3J",["^16",[["^W","^3L","~$multi?","^4F","^3M","^4B","^3Z"]]]]]],"^3H",true,"^P","~$datascript.pull-api/recurse-attr","^6","datascript/pull_api.cljc","^:",20,"^3O",["^16",[["^W","^3L","^4U","^4F","^3M","^4B","^3Z"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",87,"^3S","^3T","^9",87,"^3V",7,"^3W",true,"^3I",["^16",["^3J",["^16",[["^W","^3L","^4U","^4F","^3M","^4B","^3Z"]]]]]],"~$pull-wildcard",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",223,"^8",8,"^9",223,"^:",21,"^3H",true,"^3I",["^16",["^3J",["^16",[["^W","^3Y","^3Z"]]]]]],"^3H",true,"^P","~$datascript.pull-api/pull-wildcard","^6","datascript/pull_api.cljc","^:",21,"^3O",["^16",[["^W","^3Y","^3Z"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",223,"^3S","^3T","^9",223,"^3V",3,"^3W",true,"^3I",["^16",["^3J",["^16",[["^W","^3Y","^3Z"]]]]]],"~$into!",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",10,"^8",8,"^9",10,"^:",13,"^3H",true,"^3I",["^16",["^3J",["^16",[["~$transient-coll","~$items"]]]]]],"^3H",true,"^P","~$datascript.pull-api/into!","^6","datascript/pull_api.cljc","^:",13,"^3O",["^16",[["^4Z","^4["]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",10,"^3S",["^O",[null,"^3U"]],"^9",10,"^3V",2,"^3W",true,"^3I",["^16",["^3J",["^16",[["^4Z","^4["]]]]]],"~$expand-frame",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",102,"^8",10,"^9",102,"^:",22,"^3H",true,"^3I",["^16",["^3J",["^16",[["^4B","^3M","^4>","^4U","^4F"]]]]]],"^3H",true,"^P","~$datascript.pull-api/expand-frame","^6","datascript/pull_api.cljc","^:",22,"^3O",["^16",[["^4B","^3M","^4>","^4U","^4F"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",3,"^3R",false,"^7",102,"^3S",["^O",["^3T","^3U"]],"^9",102,"^3V",5,"^3W",true,"^3I",["^16",["^3J",["^16",[["^4B","^3M","^4>","^4U","^4F"]]]]]],"~$pull-spec",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",267,"^8",7,"^9",267,"^:",16,"^3I",["^16",["^3J",["^16",[["^W","^4L","^4F","^4U"]]]]]],"^P","~$datascript.pull-api/pull-spec","^6","datascript/pull_api.cljc","^:",16,"^3O",["^16",[["^W","^4L","^4F","^4U"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",267,"^3S","^3U","^9",267,"^3V",4,"^3W",true,"^3I",["^16",["^3J",["^16",[["^W","^4L","^4F","^4U"]]]]]],"~$pull-pattern",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",250,"^8",8,"^9",250,"^:",20,"^3H",true,"^3I",["^16",["^3J",["^16",[["^W","^3Z"]]]]]],"^3H",true,"^P","~$datascript.pull-api/pull-pattern","^6","datascript/pull_api.cljc","^:",20,"^3O",["^16",[["^W","^3Z"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",250,"^9",250,"^3V",2,"^3W",true,"^3I",["^16",["^3J",["^16",[["^W","^3Z"]]]]]],"~$expand-result",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",177,"^8",8,"^9",177,"^:",21,"^3H",true,"^3I",["^16",["^3J",["^16",[["^3Z","~$kvps"]]]]]],"^3H",true,"^P","~$datascript.pull-api/expand-result","^6","datascript/pull_api.cljc","^:",21,"^3O",["^16",[["^3Z","^58"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",177,"^3S","^3T","^9",177,"^3V",2,"^3W",true,"^3I",["^16",["^3J",["^16",[["^3Z","^58"]]]]]],"~$recursion-frame",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",68,"^8",8,"^9",68,"^:",23,"^3H",true,"^3I",["^16",["^3J",["^16",[["^4B","^3M"]]]]]],"^3H",true,"^P","~$datascript.pull-api/recursion-frame","^6","datascript/pull_api.cljc","^:",23,"^3O",["^16",[["^4B","^3M"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",68,"^3S",["^O",["^3T","^3U"]],"^9",68,"^3V",2,"^3W",true,"^3I",["^16",["^3J",["^16",[["^4B","^3M"]]]]]],"~$reset-frame",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",32,"^8",8,"^9",32,"^:",19,"^3H",true,"^3I",["^16",["^3J",["^16",[["^3Y","^4F","^58"]]]]]],"^3H",true,"^P","~$datascript.pull-api/reset-frame","^6","datascript/pull_api.cljc","^:",19,"^3O",["^16",[["^3Y","^4F","^58"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",32,"^3S",["^O",["^3T","^3U"]],"^9",32,"^3V",3,"^3W",true,"^3I",["^16",["^3J",["^16",[["^3Y","^4F","^58"]]]]]],"~$pull-seen-eid",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",56,"^8",8,"^9",56,"^:",21,"^3H",true,"^3I",["^16",["^3J",["^16",[["^3Y","^3Z","^3M"]]]]]],"^3H",true,"^P","~$datascript.pull-api/pull-seen-eid","^6","datascript/pull_api.cljc","^:",21,"^3O",["^16",[["^3Y","^3Z","^3M"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",56,"^3S",["^O",["^3T","^46"]],"^9",56,"^3V",3,"^3W",true,"^3I",["^16",["^3J",["^16",[["^3Y","^3Z","^3M"]]]]]],"~$initial-frame",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",16,"^8",8,"^9",16,"^:",21,"^3H",true,"^3I",["^16",["^3J",["^16",[["^4L","^4F","^4U"]]]]]],"^3H",true,"^P","~$datascript.pull-api/initial-frame","^6","datascript/pull_api.cljc","^:",21,"^3O",["^16",[["^4L","^4F","^4U"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",16,"^3S","~$cljs.core/IMap","^9",16,"^3V",3,"^3W",true,"^3I",["^16",["^3J",["^16",[["^4L","^4F","^4U"]]]]]],"~$pull-recursion-frame",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",75,"^8",8,"^9",75,"^:",28,"^3H",true,"^3I",["^16",["^3J",["^16",[["^W",["^3Y","~$&","^3Z"]]]]]]],"^3H",true,"^P","~$datascript.pull-api/pull-recursion-frame","^6","datascript/pull_api.cljc","^:",28,"^3O",["^16",[["^W","~$p__44945"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",75,"^3S","^3T","^9",75,"^3V",2,"^3W",true,"^3I",["^16",["^3J",["^16",[["^W",["^3Y","~$&","^3Z"]]]]]]],"~$+default-limit+",["^ ","^5",["^ ","^6","datascript/pull_api.cljc","^7",14,"^8",24,"^9",14,"^:",39,"~:const",true,"^3H",true],"^3H",true,"^P","~$datascript.pull-api/+default-limit+","^6","datascript/pull_api.cljc","^:",39,"~:const-expr",["^ ","^R","^5G","~:val",1000,"~:env",["^ ","~:context","~:expr"],"^15",1000,"~:tag","~$number"],"^8",1,"^5G",true,"^7",14,"^9",14,"^5N","^5O"],"~$seen-eid?",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",50,"^8",8,"^9",50,"^:",17,"^3H",true,"^3I",["^16",["^3J",["^16",[["^3Y","^3M"]]]]]],"^3H",true,"^P","~$datascript.pull-api/seen-eid?","^6","datascript/pull_api.cljc","^:",17,"^3O",["^16",[["^3Y","^3M"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",50,"^3S","~$boolean","^9",50,"^3V",2,"^3W",true,"^3I",["^16",["^3J",["^16",[["^3Y","^3M"]]]]]],"~$subpattern-frame",["^ ","^3G",null,"^5",["^ ","^6","datascript/pull_api.cljc","^7",28,"^8",8,"^9",28,"^:",24,"^3H",true,"^3I",["^16",["^3J",["^16",[["^4L","^4F","^4U","^3L"]]]]]],"^3H",true,"^P","~$datascript.pull-api/subpattern-frame","^6","datascript/pull_api.cljc","^:",24,"^3O",["^16",[["^4L","^4F","^4U","^3L"]]],"^3P",null,"^3Q",["^16",[null,null]],"^8",1,"^3R",false,"^7",28,"^3S",["^O",["^3T","^3U"]],"^9",28,"^3V",4,"^3W",true,"^3I",["^16",["^3J",["^16",[["^4L","^4F","^4U","^3L"]]]]]],"~$filter-reverse-attrs",["^ ","^5",["^ ","^6","datascript/pull_api.cljc","^7",168,"^8",16,"^9",168,"^:",36,"^3H",true],"^3H",true,"^P","~$datascript.pull-api/filter-reverse-attrs","^6","datascript/pull_api.cljc","^:",36,"^8",1,"^7",168,"^9",168,"^5N","~$function"]],"^14",["^ ","^Z","^Z","^V","^V","^W","^V"],"~:cljs.analyzer/constants",["^ ","^10",["^O",["~:expand-kvps","~:datascript.pull-api/expand-rev","~:multi?","~:done","~:limit","~:else","~:default","~:avet","^18","~:datascript.pull-api/recursion","~:expand-rev","~:eids","~:state","~:eavt","~:recursion","^10","~:specs","~:db/id","~:attrs","~:subpattern","~:depth","~:eid","~:wildcard?","~:expand","~:kvps","~:datoms","~:pattern","~:attr","~:results"]],"~:order",["^5[","^67","^68","^6:","^6;","^6A","^6C","^6E","^6G","^6?","^10","^6=","^6F","^6<","^65","^60","^61","^18","^6>","^62","^63","^69","^64","^5Z","^5Y","^6D","^6@","^66","^6B"]],"^1:",["^ ","^11",["^O",[]]],"^1;",["^ "],"^1<",["^[","^Z","^V","^X"]],"^S","^Q","~:ns-specs",["^ "],"~:ns-spec-vars",["^O",[]],"~:compiler-options",["^1J",[["^6K","~:static-fns"],true,["^6K","~:shadow-tweaks"],null,["^6K","~:elide-asserts"],false,["^6K","~:optimize-constants"],null,["^6K","^1A"],null,["^6K","~:external-config"],null,["^6K","~:tooling-config"],null,["^6K","~:emit-constants"],null,["^6K","~:load-tests"],null,["^6K","~:form-size-threshold"],null,["^6K","~:infer-externs"],true,["^6K","^1C"],null,["~:js-options","~:js-provider"],"~:shadow",["~:mode"],"~:dev",["^6K","~:fn-invoke-direct"],null,["^6K","~:source-map"],"/dev/null"]]]