["^ ","~:output",["^ ","~:js","goog.provide('datascript.impl.entity');\ngoog.require('cljs.core');\ngoog.require('datascript.db');\n\n\n\n\ndatascript.impl.entity.entid = (function datascript$impl$entity$entid(db,eid){\nif(((typeof eid === 'number') || (cljs.core.sequential_QMARK_(eid)) || ((eid instanceof cljs.core.Keyword)))){\nreturn datascript.db.entid(db,eid);\n} else {\nreturn null;\n}\n});\ndatascript.impl.entity.entity = (function datascript$impl$entity$entity(db,eid){\nif(datascript.db.db_QMARK_(db)){\n} else {\nthrow (new Error(\"Assert failed: (db/db? db)\"));\n}\n\nvar temp__5735__auto__ = datascript.impl.entity.entid(db,eid);\nif(cljs.core.truth_(temp__5735__auto__)){\nvar e = temp__5735__auto__;\nvar G__43285 = db;\nvar G__43286 = e;\nvar G__43287 = cljs.core.volatile_BANG_(false);\nvar G__43288 = cljs.core.volatile_BANG_(cljs.core.PersistentArrayMap.EMPTY);\nreturn (datascript.impl.entity.__GT_Entity.cljs$core$IFn$_invoke$arity$4 ? datascript.impl.entity.__GT_Entity.cljs$core$IFn$_invoke$arity$4(G__43285,G__43286,G__43287,G__43288) : datascript.impl.entity.__GT_Entity.call(null,G__43285,G__43286,G__43287,G__43288));\n} else {\nreturn null;\n}\n});\ndatascript.impl.entity.entity_attr = (function datascript$impl$entity$entity_attr(db,a,datoms){\nif(datascript.db.multival_QMARK_(db,a)){\nif(datascript.db.ref_QMARK_(db,a)){\nreturn cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (p1__43292_SHARP_,p2__43293_SHARP_){\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$2(p1__43292_SHARP_,datascript.impl.entity.entity(db,new cljs.core.Keyword(null,\"v\",\"v\",21465059).cljs$core$IFn$_invoke$arity$1(p2__43293_SHARP_)));\n}),cljs.core.PersistentHashSet.EMPTY,datoms);\n} else {\nreturn cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (p1__43294_SHARP_,p2__43295_SHARP_){\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$2(p1__43294_SHARP_,new cljs.core.Keyword(null,\"v\",\"v\",21465059).cljs$core$IFn$_invoke$arity$1(p2__43295_SHARP_));\n}),cljs.core.PersistentHashSet.EMPTY,datoms);\n}\n} else {\nif(datascript.db.ref_QMARK_(db,a)){\nreturn datascript.impl.entity.entity(db,new cljs.core.Keyword(null,\"v\",\"v\",21465059).cljs$core$IFn$_invoke$arity$1(cljs.core.first(datoms)));\n} else {\nreturn new cljs.core.Keyword(null,\"v\",\"v\",21465059).cljs$core$IFn$_invoke$arity$1(cljs.core.first(datoms));\n}\n}\n});\ndatascript.impl.entity._lookup_backwards = (function datascript$impl$entity$_lookup_backwards(db,eid,attr,not_found){\nvar temp__5733__auto__ = cljs.core.not_empty(datascript.db._search(db,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [null,attr,eid], null)));\nif(cljs.core.truth_(temp__5733__auto__)){\nvar datoms = temp__5733__auto__;\nif(datascript.db.component_QMARK_(db,attr)){\nreturn datascript.impl.entity.entity(db,new cljs.core.Keyword(null,\"e\",\"e\",1381269198).cljs$core$IFn$_invoke$arity$1(cljs.core.first(datoms)));\n} else {\nreturn cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (p1__43296_SHARP_,p2__43297_SHARP_){\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$2(p1__43296_SHARP_,datascript.impl.entity.entity(db,new cljs.core.Keyword(null,\"e\",\"e\",1381269198).cljs$core$IFn$_invoke$arity$1(p2__43297_SHARP_)));\n}),cljs.core.PersistentHashSet.EMPTY,datoms);\n}\n} else {\nreturn not_found;\n}\n});\ndatascript.impl.entity.multival__GT_js = (function datascript$impl$entity$multival__GT_js(val){\nif(cljs.core.truth_(val)){\nreturn cljs.core.to_array(val);\n} else {\nreturn null;\n}\n});\ndatascript.impl.entity.js_seq = (function datascript$impl$entity$js_seq(e){\n(datascript.impl.entity.touch.cljs$core$IFn$_invoke$arity$1 ? datascript.impl.entity.touch.cljs$core$IFn$_invoke$arity$1(e) : datascript.impl.entity.touch.call(null,e));\n\nvar iter__4582__auto__ = (function datascript$impl$entity$js_seq_$_iter__43299(s__43300){\nreturn (new cljs.core.LazySeq(null,(function (){\nvar s__43300__$1 = s__43300;\nwhile(true){\nvar temp__5735__auto__ = cljs.core.seq(s__43300__$1);\nif(temp__5735__auto__){\nvar s__43300__$2 = temp__5735__auto__;\nif(cljs.core.chunked_seq_QMARK_(s__43300__$2)){\nvar c__4580__auto__ = cljs.core.chunk_first(s__43300__$2);\nvar size__4581__auto__ = cljs.core.count(c__4580__auto__);\nvar b__43302 = cljs.core.chunk_buffer(size__4581__auto__);\nif((function (){var i__43301 = (0);\nwhile(true){\nif((i__43301 < size__4581__auto__)){\nvar vec__43308 = cljs.core._nth.cljs$core$IFn$_invoke$arity$2(c__4580__auto__,i__43301);\nvar a = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__43308,(0),null);\nvar v = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__43308,(1),null);\ncljs.core.chunk_append(b__43302,((datascript.db.multival_QMARK_(e.db,a))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [a,datascript.impl.entity.multival__GT_js(v)], null):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [a,v], null)));\n\nvar G__43409 = (i__43301 + (1));\ni__43301 = G__43409;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__43302),datascript$impl$entity$js_seq_$_iter__43299(cljs.core.chunk_rest(s__43300__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__43302),null);\n}\n} else {\nvar vec__43313 = cljs.core.first(s__43300__$2);\nvar a = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__43313,(0),null);\nvar v = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__43313,(1),null);\nreturn cljs.core.cons(((datascript.db.multival_QMARK_(e.db,a))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [a,datascript.impl.entity.multival__GT_js(v)], null):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [a,v], null)),datascript$impl$entity$js_seq_$_iter__43299(cljs.core.rest(s__43300__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n}),null,null));\n});\nreturn iter__4582__auto__(cljs.core.deref(e.cache));\n});\n\n/**\n* @constructor\n * @implements {cljs.core.IEquiv}\n * @implements {cljs.core.IHash}\n * @implements {cljs.core.IFn}\n * @implements {cljs.core.ICounted}\n * @implements {cljs.core.ISeqable}\n * @implements {cljs.core.IPrintWithWriter}\n * @implements {cljs.core.IAssociative}\n * @implements {cljs.core.ILookup}\n*/\ndatascript.impl.entity.Entity = (function (db,eid,touched,cache){\nthis.db = db;\nthis.eid = eid;\nthis.touched = touched;\nthis.cache = cache;\nthis.cljs$lang$protocol_mask$partition0$ = 2162164483;\nthis.cljs$lang$protocol_mask$partition1$ = 0;\n});\n(datascript.impl.entity.Entity.prototype.entry_set = (function (){\nvar self__ = this;\nvar this$ = this;\nreturn cljs.core.to_array(cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.to_array,datascript.impl.entity.js_seq(this$)));\n}));\n\n(datascript.impl.entity.Entity.prototype.forEach = (function() {\nvar G__43411 = null;\nvar G__43411__1 = (function (f){\nvar self__ = this;\nvar this$ = this;\nvar seq__43323 = cljs.core.seq(datascript.impl.entity.js_seq(this$));\nvar chunk__43324 = null;\nvar count__43325 = (0);\nvar i__43326 = (0);\nwhile(true){\nif((i__43326 < count__43325)){\nvar vec__43334 = chunk__43324.cljs$core$IIndexed$_nth$arity$2(null,i__43326);\nvar a = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__43334,(0),null);\nvar v = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__43334,(1),null);\n(f.cljs$core$IFn$_invoke$arity$3 ? f.cljs$core$IFn$_invoke$arity$3(v,a,this$) : f.call(null,v,a,this$));\n\n\nvar G__43412 = seq__43323;\nvar G__43413 = chunk__43324;\nvar G__43414 = count__43325;\nvar G__43415 = (i__43326 + (1));\nseq__43323 = G__43412;\nchunk__43324 = G__43413;\ncount__43325 = G__43414;\ni__43326 = G__43415;\ncontinue;\n} else {\nvar temp__5735__auto__ = cljs.core.seq(seq__43323);\nif(temp__5735__auto__){\nvar seq__43323__$1 = temp__5735__auto__;\nif(cljs.core.chunked_seq_QMARK_(seq__43323__$1)){\nvar c__4609__auto__ = cljs.core.chunk_first(seq__43323__$1);\nvar G__43423 = cljs.core.chunk_rest(seq__43323__$1);\nvar G__43424 = c__4609__auto__;\nvar G__43425 = cljs.core.count(c__4609__auto__);\nvar G__43426 = (0);\nseq__43323 = G__43423;\nchunk__43324 = G__43424;\ncount__43325 = G__43425;\ni__43326 = G__43426;\ncontinue;\n} else {\nvar vec__43341 = cljs.core.first(seq__43323__$1);\nvar a = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__43341,(0),null);\nvar v = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__43341,(1),null);\n(f.cljs$core$IFn$_invoke$arity$3 ? f.cljs$core$IFn$_invoke$arity$3(v,a,this$) : f.call(null,v,a,this$));\n\n\nvar G__43427 = cljs.core.next(seq__43323__$1);\nvar G__43428 = null;\nvar G__43429 = (0);\nvar G__43430 = (0);\nseq__43323 = G__43427;\nchunk__43324 = G__43428;\ncount__43325 = G__43429;\ni__43326 = G__43430;\ncontinue;\n}\n} else {\nreturn null;\n}\n}\nbreak;\n}\n});\nvar G__43411__2 = (function (f,use_as_this){\nvar self__ = this;\nvar this$ = this;\nvar seq__43344 = cljs.core.seq(datascript.impl.entity.js_seq(this$));\nvar chunk__43345 = null;\nvar count__43346 = (0);\nvar i__43347 = (0);\nwhile(true){\nif((i__43347 < count__43346)){\nvar vec__43354 = chunk__43345.cljs$core$IIndexed$_nth$arity$2(null,i__43347);\nvar a = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__43354,(0),null);\nvar v = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__43354,(1),null);\nf.call(use_as_this,v,a,this$);\n\n\nvar G__43452 = seq__43344;\nvar G__43453 = chunk__43345;\nvar G__43454 = count__43346;\nvar G__43455 = (i__43347 + (1));\nseq__43344 = G__43452;\nchunk__43345 = G__43453;\ncount__43346 = G__43454;\ni__43347 = G__43455;\ncontinue;\n} else {\nvar temp__5735__auto__ = cljs.core.seq(seq__43344);\nif(temp__5735__auto__){\nvar seq__43344__$1 = temp__5735__auto__;\nif(cljs.core.chunked_seq_QMARK_(seq__43344__$1)){\nvar c__4609__auto__ = cljs.core.chunk_first(seq__43344__$1);\nvar G__43456 = cljs.core.chunk_rest(seq__43344__$1);\nvar G__43457 = c__4609__auto__;\nvar G__43458 = cljs.core.count(c__4609__auto__);\nvar G__43459 = (0);\nseq__43344 = G__43456;\nchunk__43345 = G__43457;\ncount__43346 = G__43458;\ni__43347 = G__43459;\ncontinue;\n} else {\nvar vec__43358 = cljs.core.first(seq__43344__$1);\nvar a = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__43358,(0),null);\nvar v = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__43358,(1),null);\nf.call(use_as_this,v,a,this$);\n\n\nvar G__43460 = cljs.core.next(seq__43344__$1);\nvar G__43461 = null;\nvar G__43462 = (0);\nvar G__43463 = (0);\nseq__43344 = G__43460;\nchunk__43345 = G__43461;\ncount__43346 = G__43462;\ni__43347 = G__43463;\ncontinue;\n}\n} else {\nreturn null;\n}\n}\nbreak;\n}\n});\nG__43411 = function(f,use_as_this){\nswitch(arguments.length){\ncase 1:\nreturn G__43411__1.call(this,f);\ncase 2:\nreturn G__43411__2.call(this,f,use_as_this);\n}\nthrow(new Error('Invalid arity: ' + arguments.length));\n};\nG__43411.cljs$core$IFn$_invoke$arity$1 = G__43411__1;\nG__43411.cljs$core$IFn$_invoke$arity$2 = G__43411__2;\nreturn G__43411;\n})()\n);\n\n(datascript.impl.entity.Entity.prototype.get = (function (attr){\nvar self__ = this;\nvar this$ = this;\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(attr,\":db/id\")){\nreturn self__.eid;\n} else {\nif(datascript.db.reverse_ref_QMARK_(attr)){\nreturn datascript.impl.entity.multival__GT_js(datascript.impl.entity._lookup_backwards(self__.db,self__.eid,datascript.db.reverse_ref(attr),null));\n} else {\nvar G__43361 = (datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$2 ? datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$2(this$,attr) : datascript.impl.entity.lookup_entity.call(null,this$,attr));\nif(datascript.db.multival_QMARK_(self__.db,attr)){\nreturn datascript.impl.entity.multival__GT_js(G__43361);\n} else {\nreturn G__43361;\n}\n}\n}\n}));\n\n(datascript.impl.entity.Entity.prototype.key_set = (function (){\nvar self__ = this;\nvar this$ = this;\nreturn cljs.core.to_array(cljs.core.keys(this$));\n}));\n\n(datascript.impl.entity.Entity.prototype.entries = (function (){\nvar self__ = this;\nvar this$ = this;\nreturn cljs.core.es6_entries_iterator(datascript.impl.entity.js_seq(this$));\n}));\n\n(datascript.impl.entity.Entity.prototype.value_set = (function (){\nvar self__ = this;\nvar this$ = this;\nreturn cljs.core.to_array(cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.second,datascript.impl.entity.js_seq(this$)));\n}));\n\n(datascript.impl.entity.Entity.prototype.toString = (function (){\nvar self__ = this;\nvar this$ = this;\nreturn cljs.core.pr_str_STAR_(this$);\n}));\n\n(datascript.impl.entity.Entity.prototype.keys = (function (){\nvar self__ = this;\nvar this$ = this;\nreturn cljs.core.es6_iterator(cljs.core.keys(this$));\n}));\n\n(datascript.impl.entity.Entity.prototype.values = (function (){\nvar self__ = this;\nvar this$ = this;\nreturn cljs.core.es6_iterator(cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.second,datascript.impl.entity.js_seq(this$)));\n}));\n\n(datascript.impl.entity.Entity.prototype.equiv = (function (other){\nvar self__ = this;\nvar this$ = this;\nreturn (datascript.impl.entity.equiv_entity.cljs$core$IFn$_invoke$arity$2 ? datascript.impl.entity.equiv_entity.cljs$core$IFn$_invoke$arity$2(this$,other) : datascript.impl.entity.equiv_entity.call(null,this$,other));\n}));\n\n(datascript.impl.entity.Entity.prototype.has = (function (attr){\nvar self__ = this;\nvar this$ = this;\nreturn (!((this$.get(attr) == null)));\n}));\n\n(datascript.impl.entity.Entity.prototype.cljs$core$ILookup$_lookup$arity$2 = (function (this$,attr){\nvar self__ = this;\nvar this$__$1 = this;\nreturn (datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3 ? datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3(this$__$1,attr,null) : datascript.impl.entity.lookup_entity.call(null,this$__$1,attr,null));\n}));\n\n(datascript.impl.entity.Entity.prototype.cljs$core$ILookup$_lookup$arity$3 = (function (this$,attr,not_found){\nvar self__ = this;\nvar this$__$1 = this;\nreturn (datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3 ? datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3(this$__$1,attr,not_found) : datascript.impl.entity.lookup_entity.call(null,this$__$1,attr,not_found));\n}));\n\n(datascript.impl.entity.Entity.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = (function (_,writer,opts){\nvar self__ = this;\nvar ___$1 = this;\nreturn cljs.core._pr_writer(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(cljs.core.deref(self__.cache),new cljs.core.Keyword(\"db\",\"id\",\"db/id\",-1388397098),self__.eid),writer,opts);\n}));\n\n(datascript.impl.entity.Entity.prototype.cljs$core$ICounted$_count$arity$1 = (function (this$){\nvar self__ = this;\nvar this$__$1 = this;\n(datascript.impl.entity.touch.cljs$core$IFn$_invoke$arity$1 ? datascript.impl.entity.touch.cljs$core$IFn$_invoke$arity$1(this$__$1) : datascript.impl.entity.touch.call(null,this$__$1));\n\nreturn cljs.core.count(cljs.core.deref(self__.cache));\n}));\n\n(datascript.impl.entity.Entity.prototype.cljs$core$IHash$_hash$arity$1 = (function (_){\nvar self__ = this;\nvar ___$1 = this;\nreturn cljs.core.hash(self__.eid);\n}));\n\n(datascript.impl.entity.Entity.prototype.cljs$core$IEquiv$_equiv$arity$2 = (function (this$,o){\nvar self__ = this;\nvar this$__$1 = this;\nreturn (datascript.impl.entity.equiv_entity.cljs$core$IFn$_invoke$arity$2 ? datascript.impl.entity.equiv_entity.cljs$core$IFn$_invoke$arity$2(this$__$1,o) : datascript.impl.entity.equiv_entity.call(null,this$__$1,o));\n}));\n\n(datascript.impl.entity.Entity.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = (function (this$,k){\nvar self__ = this;\nvar this$__$1 = this;\nreturn cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\"datascript.impl.entity\",\"nf\",\"datascript.impl.entity/nf\",-953741353),(function (){var G__43368 = this$__$1;\nvar G__43369 = k;\nvar G__43370 = new cljs.core.Keyword(\"datascript.impl.entity\",\"nf\",\"datascript.impl.entity/nf\",-953741353);\nreturn (datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3 ? datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3(G__43368,G__43369,G__43370) : datascript.impl.entity.lookup_entity.call(null,G__43368,G__43369,G__43370));\n})());\n}));\n\n(datascript.impl.entity.Entity.prototype.cljs$core$ISeqable$_seq$arity$1 = (function (this$){\nvar self__ = this;\nvar this$__$1 = this;\n(datascript.impl.entity.touch.cljs$core$IFn$_invoke$arity$1 ? datascript.impl.entity.touch.cljs$core$IFn$_invoke$arity$1(this$__$1) : datascript.impl.entity.touch.call(null,this$__$1));\n\nreturn cljs.core.seq(cljs.core.deref(self__.cache));\n}));\n\n(datascript.impl.entity.Entity.prototype.call = (function (unused__10555__auto__){\nvar self__ = this;\nvar self__ = this;\nvar G__43376 = (arguments.length - (1));\nswitch (G__43376) {\ncase (1):\nreturn self__.cljs$core$IFn$_invoke$arity$1((arguments[(1)]));\n\nbreak;\ncase (2):\nreturn self__.cljs$core$IFn$_invoke$arity$2((arguments[(1)]),(arguments[(2)]));\n\nbreak;\ndefault:\nthrow (new Error([\"Invalid arity: \",cljs.core.str.cljs$core$IFn$_invoke$arity$1((arguments.length - (1)))].join('')));\n\n}\n}));\n\n(datascript.impl.entity.Entity.prototype.apply = (function (self__,args43317){\nvar self__ = this;\nvar self____$1 = this;\nreturn self____$1.call.apply(self____$1,[self____$1].concat(cljs.core.aclone(args43317)));\n}));\n\n(datascript.impl.entity.Entity.prototype.cljs$core$IFn$_invoke$arity$1 = (function (k){\nvar self__ = this;\nvar this$ = this;\nreturn (datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$2 ? datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$2(this$,k) : datascript.impl.entity.lookup_entity.call(null,this$,k));\n}));\n\n(datascript.impl.entity.Entity.prototype.cljs$core$IFn$_invoke$arity$2 = (function (k,not_found){\nvar self__ = this;\nvar this$ = this;\nreturn (datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3 ? datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3(this$,k,not_found) : datascript.impl.entity.lookup_entity.call(null,this$,k,not_found));\n}));\n\n(datascript.impl.entity.Entity.getBasis = (function (){\nreturn new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"db\",\"db\",-1661185010,null),new cljs.core.Symbol(null,\"eid\",\"eid\",-2094915839,null),new cljs.core.Symbol(null,\"touched\",\"touched\",1031397108,null),new cljs.core.Symbol(null,\"cache\",\"cache\",403508473,null)], null);\n}));\n\n(datascript.impl.entity.Entity.cljs$lang$type = true);\n\n(datascript.impl.entity.Entity.cljs$lang$ctorStr = \"datascript.impl.entity/Entity\");\n\n(datascript.impl.entity.Entity.cljs$lang$ctorPrWriter = (function (this__4428__auto__,writer__4429__auto__,opt__4430__auto__){\nreturn cljs.core._write(writer__4429__auto__,\"datascript.impl.entity/Entity\");\n}));\n\n/**\n * Positional factory function for datascript.impl.entity/Entity.\n */\ndatascript.impl.entity.__GT_Entity = (function datascript$impl$entity$__GT_Entity(db,eid,touched,cache){\nreturn (new datascript.impl.entity.Entity(db,eid,touched,cache));\n});\n\ndatascript.impl.entity.entity_QMARK_ = (function datascript$impl$entity$entity_QMARK_(x){\nreturn (x instanceof datascript.impl.entity.Entity);\n});\ndatascript.impl.entity.equiv_entity = (function datascript$impl$entity$equiv_entity(this$,that){\nreturn (((that instanceof datascript.impl.entity.Entity)) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this$.eid,that.eid)));\n});\ndatascript.impl.entity.lookup_entity = (function datascript$impl$entity$lookup_entity(var_args){\nvar G__43384 = arguments.length;\nswitch (G__43384) {\ncase 2:\nreturn datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));\n\nbreak;\ncase 3:\nreturn datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3((arguments[(0)]),(arguments[(1)]),(arguments[(2)]));\n\nbreak;\ndefault:\nthrow (new Error([\"Invalid arity: \",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));\n\n}\n});\n\n(datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$2 = (function (this$,attr){\nreturn datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3(this$,attr,null);\n}));\n\n(datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3 = (function (this$,attr,not_found){\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(attr,new cljs.core.Keyword(\"db\",\"id\",\"db/id\",-1388397098))){\nreturn this$.eid;\n} else {\nif(datascript.db.reverse_ref_QMARK_(attr)){\nreturn datascript.impl.entity._lookup_backwards(this$.db,this$.eid,datascript.db.reverse_ref(attr),not_found);\n} else {\nvar temp__5737__auto__ = (function (){var fexpr__43385 = cljs.core.deref(this$.cache);\nreturn (fexpr__43385.cljs$core$IFn$_invoke$arity$1 ? fexpr__43385.cljs$core$IFn$_invoke$arity$1(attr) : fexpr__43385.call(null,attr));\n})();\nif((temp__5737__auto__ == null)){\nif(cljs.core.truth_(cljs.core.deref(this$.touched))){\nreturn not_found;\n} else {\nvar temp__5737__auto____$1 = cljs.core.not_empty(datascript.db._search(this$.db,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [this$.eid,attr], null)));\nif((temp__5737__auto____$1 == null)){\nreturn not_found;\n} else {\nvar datoms = temp__5737__auto____$1;\nvar value = datascript.impl.entity.entity_attr(this$.db,attr,datoms);\ncljs.core.vreset_BANG_(this$.cache,cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(cljs.core.deref(this$.cache),attr,value));\n\nreturn value;\n}\n}\n} else {\nvar v = temp__5737__auto__;\nreturn v;\n}\n}\n}\n}));\n\n(datascript.impl.entity.lookup_entity.cljs$lang$maxFixedArity = 3);\n\ndatascript.impl.entity.touch_components = (function datascript$impl$entity$touch_components(db,a__GT_v){\nreturn cljs.core.reduce_kv((function (acc,a,v){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(acc,a,((datascript.db.component_QMARK_(db,a))?((datascript.db.multival_QMARK_(db,a))?cljs.core.set(cljs.core.map.cljs$core$IFn$_invoke$arity$2(datascript.impl.entity.touch,v)):(datascript.impl.entity.touch.cljs$core$IFn$_invoke$arity$1 ? datascript.impl.entity.touch.cljs$core$IFn$_invoke$arity$1(v) : datascript.impl.entity.touch.call(null,v))):v));\n}),cljs.core.PersistentArrayMap.EMPTY,a__GT_v);\n});\ndatascript.impl.entity.datoms__GT_cache = (function datascript$impl$entity$datoms__GT_cache(db,datoms){\nreturn cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (acc,part){\nvar a = new cljs.core.Keyword(null,\"a\",\"a\",-2123407586).cljs$core$IFn$_invoke$arity$1(cljs.core.first(part));\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(acc,a,datascript.impl.entity.entity_attr(db,a,part));\n}),cljs.core.PersistentArrayMap.EMPTY,cljs.core.partition_by.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"a\",\"a\",-2123407586),datoms));\n});\ndatascript.impl.entity.touch = (function datascript$impl$entity$touch(e){\nif(datascript.impl.entity.entity_QMARK_(e)){\n} else {\nthrow (new Error(\"Assert failed: (entity? e)\"));\n}\n\nif(cljs.core.truth_(cljs.core.deref(e.touched))){\n} else {\nvar temp__5735__auto___43481 = cljs.core.not_empty(datascript.db._search(e.db,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [e.eid], null)));\nif(cljs.core.truth_(temp__5735__auto___43481)){\nvar datoms_43482 = temp__5735__auto___43481;\ncljs.core.vreset_BANG_(e.cache,datascript.impl.entity.touch_components(e.db,datascript.impl.entity.datoms__GT_cache(e.db,datoms_43482)));\n\ncljs.core.vreset_BANG_(e.touched,true);\n} else {\n}\n}\n\nreturn e;\n});\ngoog.exportSymbol(\"datascript.impl.entity.Entity\",datascript.impl.entity.Entity);\n","~:ns-info",["^ ","~:rename-macros",null,"~:renames",["^ "],"~:meta",["^ ","~:file","datascript/impl/entity.cljc","~:line",1,"~:column",14,"~:end-line",1,"~:end-column",36,"~:no-doc",true],"~:ns-aliases",["^ ","~$cljs.loader","~$shadow.loader","~$react","~$module$node_modules$react$index","~$create-react-class","~$module$node_modules$create_react_class$index","~$react-dom","~$module$node_modules$react_dom$index","~$react-flip-move","~$module$node_modules$react_flip_move$dist$react_flip_move_cjs","~$clojure.pprint","~$cljs.pprint","~$clojure.repl","~$cljs.repl","~$clojure.spec.alpha","~$cljs.spec.alpha"],"~:use-macros",null,"~:excludes",["~#set",["~$get","~$keys"]],"~:name","~$datascript.impl.entity","~:op","~:ns","~:imports",null,"~:requires",["^ ","~$cljs.core","^X","~$c","^X","~$datascript.db","^Y","~$db","^Y","~$goog","^["],"~:seen",["^O",["~:require"]],"~:uses",null,"~:require-macros",["^ ","^X","^X","~$c","^X","^Y","^Y","^Z","^Y"],"~:form",["~#list",["~$ns","^S",["^15",["~:refer-clojure","~:exclude",["^Q","^P"]]],["^15",["^11",["^X","~:as","~$c"],["^Y","^19","^Z"]]]]],"~:flags",["^ ","^11",["^O",[]]],"~:js-deps",["^ "],"~:deps",["^[","^X","^Y"]],"^U","^S","~:resource-id",["~:shadow.build.classpath/resource","datascript/impl/entity.cljc"],"~:compiled-at",1578175834378,"~:resource-name","datascript/impl/entity.cljc","~:warnings",[],"~:source","(ns ^:no-doc datascript.impl.entity\n  (:refer-clojure :exclude [keys get])\n  (:require [#?(:cljs cljs.core :clj clojure.core) :as c]\n            [datascript.db :as db]))\n\n(declare entity ->Entity equiv-entity lookup-entity touch)\n\n(defn- entid [db eid]\n  (when (or (number? eid)\n            (sequential? eid)\n            (keyword? eid))\n    (db/entid db eid)))\n\n(defn entity [db eid]\n  {:pre [(db/db? db)]}\n  (when-let [e (entid db eid)]\n    (->Entity db e (volatile! false) (volatile! {}))))\n\n(defn- entity-attr [db a datoms]\n  (if (db/multival? db a)\n    (if (db/ref? db a)\n      (reduce #(conj %1 (entity db (:v %2))) #{} datoms)\n      (reduce #(conj %1 (:v %2)) #{} datoms))\n    (if (db/ref? db a)\n      (entity db (:v (first datoms)))\n      (:v (first datoms)))))\n\n(defn- -lookup-backwards [db eid attr not-found]\n  (if-let [datoms (not-empty (db/-search db [nil attr eid]))]\n    (if (db/component? db attr)\n      (entity db (:e (first datoms)))\n      (reduce #(conj %1 (entity db (:e %2))) #{} datoms))\n    not-found))\n\n#?(:cljs\n   (defn- multival->js [val]\n     (when val (to-array val))))\n\n#?(:cljs\n   (defn- js-seq [e]\n     (touch e)\n     (for [[a v] @(.-cache e)]\n       (if (db/multival? (.-db e) a)\n         [a (multival->js v)]\n         [a v]))))\n\n(deftype Entity [db eid touched cache]\n  #?@(:cljs\n      [Object\n       (toString [this]\n                 (pr-str* this))\n       (equiv [this other]\n              (equiv-entity this other))\n\n       ;; js/map interface\n       (keys [this]\n             (es6-iterator (c/keys this)))\n       (entries [this]\n                (es6-entries-iterator (js-seq this)))\n       (values [this]\n               (es6-iterator (map second (js-seq this))))\n       (has [this attr]\n            (not (nil? (.get this attr))))\n       (get [this attr]\n            (if (= attr \":db/id\")\n              eid\n              (if (db/reverse-ref? attr)\n                (-> (-lookup-backwards db eid (db/reverse-ref attr) nil)\n                    multival->js)\n                (cond-> (lookup-entity this attr)\n                  (db/multival? db attr) multival->js))))\n       (forEach [this f]\n                (doseq [[a v] (js-seq this)]\n                  (f v a this)))\n       (forEach [this f use-as-this]\n                (doseq [[a v] (js-seq this)]\n                  (.call f use-as-this v a this)))\n\n       ;; js fallbacks\n       (key_set   [this] (to-array (c/keys this)))\n       (entry_set [this] (to-array (map to-array (js-seq this))))\n       (value_set [this] (to-array (map second (js-seq this))))\n\n       IEquiv\n       (-equiv [this o] (equiv-entity this o))\n\n       IHash\n       (-hash [_]\n              (hash eid)) ;; db?\n\n       ISeqable\n       (-seq [this]\n             (touch this)\n             (seq @cache))\n\n       ICounted\n       (-count [this]\n               (touch this)\n               (count @cache))\n\n       ILookup\n       (-lookup [this attr]           (lookup-entity this attr nil))\n       (-lookup [this attr not-found] (lookup-entity this attr not-found))\n\n       IAssociative\n       (-contains-key? [this k]\n                       (not= ::nf (lookup-entity this k ::nf)))\n\n       IFn\n       (-invoke [this k]\n                (lookup-entity this k))\n       (-invoke [this k not-found]\n                (lookup-entity this k not-found))\n\n       IPrintWithWriter\n       (-pr-writer [_ writer opts]\n                   (-pr-writer (assoc @cache :db/id eid) writer opts))]\n\n      :clj\n      [Object\n       (toString [e]      (pr-str (assoc @cache :db/id eid)))\n       (hashCode [e]      (hash eid)) ; db?\n       (equals [e o]      (equiv-entity e o))\n\n       clojure.lang.Seqable\n       (seq [e]           (touch e) (seq @cache))\n\n       clojure.lang.Associative\n       (equiv [e o]       (equiv-entity e o))\n       (containsKey [e k] (not= ::nf (lookup-entity e k ::nf)))\n       (entryAt [e k]     (some->> (lookup-entity e k) (clojure.lang.MapEntry. k)))\n\n       (empty [e]         (throw (UnsupportedOperationException.)))\n       (assoc [e k v]     (throw (UnsupportedOperationException.)))\n       (cons  [e [k v]]   (throw (UnsupportedOperationException.)))\n       (count [e]         (touch e) (count @(.-cache e)))\n\n       clojure.lang.ILookup\n       (valAt [e k]       (lookup-entity e k))\n       (valAt [e k not-found] (lookup-entity e k not-found))\n\n       clojure.lang.IFn\n       (invoke [e k]      (lookup-entity e k))\n       (invoke [e k not-found] (lookup-entity e k not-found))\n       ]))\n\n(defn entity? [x] (instance? Entity x))\n\n#?(:clj\n   (defmethod print-method Entity [e, ^java.io.Writer w]\n     (.write w (str e))))\n\n(defn- equiv-entity [^Entity this that]\n  (and\n   (instance? Entity that)\n   ;; (= db  (.-db ^Entity that))\n   (= (.-eid this) (.-eid ^Entity that))))\n\n(defn- lookup-entity\n  ([this attr] (lookup-entity this attr nil))\n  ([^Entity this attr not-found]\n   (if (= attr :db/id)\n     (.-eid this)\n     (if (db/reverse-ref? attr)\n       (-lookup-backwards (.-db this) (.-eid this) (db/reverse-ref attr) not-found)\n       (if-some [v (@(.-cache this) attr)]\n         v\n         (if @(.-touched this)\n           not-found\n           (if-some [datoms (not-empty (db/-search (.-db this) [(.-eid this) attr]))]\n             (let [value (entity-attr (.-db this) attr datoms)]\n               (vreset! (.-cache this) (assoc @(.-cache this) attr value))\n               value)\n             not-found)))))))\n\n(defn touch-components [db a->v]\n  (reduce-kv (fn [acc a v]\n               (assoc acc a\n                 (if (db/component? db a)\n                   (if (db/multival? db a)\n                     (set (map touch v))\n                     (touch v))\n                   v)))\n             {} a->v))\n\n(defn- datoms->cache [db datoms]\n  (reduce (fn [acc part]\n    (let [a (:a (first part))]\n      (assoc acc a (entity-attr db a part))))\n    {} (partition-by :a datoms)))\n\n(defn touch [^Entity e]\n  {:pre [(entity? e)]}\n  (when-not @(.-touched e)\n    (when-let [datoms (not-empty (db/-search (.-db e) [(.-eid e)]))]\n      (vreset! (.-cache e) (->> datoms\n                                (datoms->cache (.-db e))\n                                (touch-components (.-db e))))\n      (vreset! (.-touched e) true)))\n  e)\n\n#?(:cljs (goog/exportSymbol \"datascript.impl.entity.Entity\" Entity))\n","~:reader-features",["^O",["~:cljs"]],"~:cljc",true,"~:source-map-compact",["^ ","mappings","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","names",["datascript.impl.entity/entid","db","eid","cljs.core/sequential?","cljs.core/Keyword","datascript.db/entid","js/Error","datascript.impl.entity/entity","datascript.db/db?","temp__5735__auto__","e","G__43285","G__43286","G__43287","G__43288","datascript.impl.entity/->Entity","cljs.core/volatile!","datascript.impl.entity/entity-attr","a","datoms","datascript.db/multival?","datascript.db/ref?","p1__43292#","p2__43293#","cljs.core.reduce.cljs$core$IFn$_invoke$arity$3","cljs.core.conj.cljs$core$IFn$_invoke$arity$2","p1__43294#","p2__43295#","cljs.core/first","datascript.impl.entity/-lookup-backwards","attr","not-found","temp__5733__auto__","cljs.core/not-empty","datascript.db/-search","datascript.db/component?","p1__43296#","p2__43297#","datascript.impl.entity/multival->js","val","cljs.core/to-array","datascript.impl.entity/js-seq","datascript.impl.entity/touch","iter__4582__auto__","s__43300","cljs.core/LazySeq","cljs.core/seq","cljs.core/chunked-seq?","c__4580__auto__","size__4581__auto__","cljs.core/count","b__43302","cljs.core/chunk-buffer","i__43301","vec__43308","cljs.core._nth.cljs$core$IFn$_invoke$arity$2","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__43299","cljs.core/chunk-rest","vec__43313","cljs.core/cons","cljs.core/rest","cljs.core/deref","v","unused__10555__auto__","self__","G__43376","args43317","cljs.core/aclone","this__4428__auto__","writer__4429__auto__","opt__4430__auto__","cljs.core/-write","datascript.impl.entity/Entity","touched","cache","this","cljs.core/pr-str*","other","datascript.impl.entity/equiv-entity","cljs.core/es6-iterator","cljs.core/keys","cljs.core/es6-entries-iterator","cljs.core.map.cljs$core$IFn$_invoke$arity$2","cljs.core/second","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","datascript.db/reverse-ref?","datascript.db/reverse-ref","G__43361","datascript.impl.entity/lookup-entity","f","seq__43323","chunk__43324","count__43325","i__43326","vec__43334","c__4609__auto__","cljs.core/chunk-first","vec__43341","cljs.core/next","use-as-this","seq__43344","chunk__43345","count__43346","i__43347","vec__43354","vec__43358","o","_","cljs.core/hash","k","cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2","G__43368","G__43369","G__43370","writer","opts","cljs.core/-pr-writer","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","datascript.impl.entity/entity?","x","that","var_args","G__43384","datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3","temp__5737__auto__","fexpr__43385","value","cljs.core/vreset!","datascript.impl.entity/touch-components","a->v","cljs.core/reduce-kv","acc","cljs.core/set","datascript.impl.entity/datoms->cache","part","cljs.core.partition_by.cljs$core$IFn$_invoke$arity$2","goog/exportSymbol"]]],"~:cache-keys",["~#cmap",[["^1>","datascript/db.cljc"],[1578170241590,"~:shadow.build.compiler/resolve",["^ ","~:require-id",null,"~:deps-ids",["^O",[]],"~:deps-syms",["^[","^X","~$goog.array","~$clojure.walk","~$clojure.data","~$me.tonsky.persistent-sorted-set","~$me.tonsky.persistent-sorted-set.arrays"]]],["^1>","goog/dom/tagname.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","~$goog.dom.HtmlElement"]]],["^1>","goog/math/math.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1O","~$goog.asserts"]]],["^1>","goog/html/trustedtypes.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/labs/useragent/browser.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1O","~$goog.labs.userAgent.util","~$goog.object","~$goog.string.internal"]]],["^1>","goog/html/safeurl.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1U","~$goog.fs.url","~$goog.html.TrustedResourceUrl","~$goog.i18n.bidi.Dir","~$goog.i18n.bidi.DirectionalString","~$goog.string.Const","~$goog.string.TypedString","^1X"]]],["^1>","goog/array/array.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1U"]]],["^1>","goog/debug/error.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/dom/nodetype.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/string/typedstring.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/object/object.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/dom/asserts.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1U"]]],"~:SHADOW-TIMESTAMP",[1577302212000,1574477009000],["^1>","goog/math/long.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1U","~$goog.reflect"]]],["^1>","goog/html/trustedresourceurl.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1U","~$goog.html.trustedtypes","^1[","^20","^21","^22"]]],["^1>","goog/string/internal.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/functions/functions.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/html/safestyle.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1O","^1U","~$goog.html.SafeUrl","^21","^22","^1X"]]],["^1>","goog/dom/safe.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1U","~$goog.dom.asserts","~$goog.functions","~$goog.html.SafeHtml","~$goog.html.SafeScript","~$goog.html.SafeStyle","^26","^1Z","~$goog.html.uncheckedconversions","^21","^1X"]]],["^1>","clojure/walk.cljs"],[1574477009594,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^X"]]],["^1>","goog/structs/map.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","~$goog.iter.Iterator","~$goog.iter.StopIteration"]]],["^1>","goog/html/safehtml.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1O","^1U","~$goog.dom.TagName","~$goog.dom.tags","^2:","^2;","~$goog.html.SafeStyleSheet","^26","^1Z","^25","^1[","^20","~$goog.labs.userAgent.browser","^1W","^21","^22","^1X"]]],["^1>","goog/dom/tags.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1W"]]],["^1>","datascript/impl/entity.cljc"],[1578170241590,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^X","^Y"]]],["^1>","me/tonsky/persistent_sorted_set/arrays.cljc"],[1578170241726,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^X","~$clojure.string"]]],["^1>","goog/asserts/asserts.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","~$goog.debug.Error","~$goog.dom.NodeType"]]],["^1>","me/tonsky/persistent_sorted_set.cljs"],[1578170241726,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^X","^1S"]]],["^1>","goog/uri/uri.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1O","^1U","~$goog.string","~$goog.structs","~$goog.structs.Map","~$goog.uri.utils","~$goog.uri.utils.ComponentIndex","~$goog.uri.utils.StandardQueryParam"]]],["^1>","goog/i18n/bidi.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/fs/url.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/base.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",[]]],["^1>","goog/structs/structs.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1O","^1W"]]],["^1>","clojure/string.cljs"],[1574477009594,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^X","^2F","~$goog.string.StringBuffer"]]],["^1>","goog/string/string.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","~$goog.dom.safe","^2<","^21","^1X"]]],["^1>","clojure/data.cljs"],[1574477009594,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^X","~$clojure.set"]]],["^1>","goog/reflect/reflect.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/labs/useragent/util.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1X"]]],["^1>","goog/string/stringbuffer.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","goog/iter/iter.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1O","^1U","^28","~$goog.math"]]],["^1>","goog/html/uncheckedconversions.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1U","^29","^2:","^2;","^2A","^26","^1Z","^21","^1X"]]],["^1>","goog/dom/htmlelement.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^["]]],["^1>","cljs/core.cljs"],[1574477009594,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["~$goog.math.Long","~$goog.math.Integer","^2F","^1W","^1O","~$goog.Uri","^2L"]]],["^1>","goog/html/safescript.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1U","^25","^21","^22"]]],["^1>","goog/html/safestylesheet.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1O","^1U","^2;","^1W","^21","^22","^1X"]]],["^1>","goog/math/integer.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^24"]]],["^1>","clojure/set.cljs"],[1574477009594,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^X"]]],["^1>","goog/uri/utils.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1O","^1U","^2F"]]],["^1>","goog/string/const.js"],[1573417071133,"^1K",["^ ","^1L",null,"^1M",["^O",[]],"^1N",["^[","^1U","^22"]]]]],"~:clj-info",["^ ","jar:file:/Users/lambda_school_loaner_94/.m2/repository/persistent-sorted-set/persistent-sorted-set/0.1.2/persistent-sorted-set-0.1.2.jar!/me/tonsky/persistent_sorted_set.clj",1578170241000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/env.cljc",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/util.cljc",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/tools.reader/1.3.2/tools.reader-1.3.2.jar!/clojure/tools/reader/reader_types.clj",1559507883000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/core.cljc",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojure/1.10.1/clojure-1.10.1.jar!/clojure/edn.clj",1559876774000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/tagged_literals.cljc",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/tools.reader/1.3.2/tools.reader-1.3.2.jar!/clojure/tools/reader/default_data_readers.clj",1559507883000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojure/1.10.1/clojure-1.10.1.jar!/clojure/string.clj",1559876774000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojure/1.10.1/clojure-1.10.1.jar!/clojure/pprint.clj",1559876774000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/externs.clj",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojure/1.10.1/clojure-1.10.1.jar!/clojure/java/io.clj",1559876774000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/tools.reader/1.3.2/tools.reader-1.3.2.jar!/clojure/tools/reader/impl/inspect.clj",1559507883000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/source_map.clj",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojure/1.10.1/clojure-1.10.1.jar!/clojure/set.clj",1559876774000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/persistent-sorted-set/persistent-sorted-set/0.1.2/persistent-sorted-set-0.1.2.jar!/me/tonsky/persistent_sorted_set/arrays.cljc",1578170241000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/source_map/base64_vlq.clj",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/tools.reader/1.3.2/tools.reader-1.3.2.jar!/clojure/tools/reader.clj",1559507883000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/source_map/base64.clj",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojure/1.10.1/clojure-1.10.1.jar!/clojure/instant.clj",1559876774000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojure/1.10.1/clojure-1.10.1.jar!/clojure/core.clj",1559876774000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/compiler.cljc",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/data.json/0.2.6/data.json-0.2.6.jar!/clojure/data/json.clj",1556312825000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/datascript/datascript/0.18.8/datascript-0.18.8.jar!/datascript/db.cljc",1578170241000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/js_deps.cljc",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/clojurescript/1.10.597/clojurescript-1.10.597.jar!/cljs/analyzer.cljc",1574477009000,"jar:file:/Users/lambda_school_loaner_94/.m2/repository/org/clojure/tools.reader/1.3.2/tools.reader-1.3.2.jar!/clojure/tools/reader/impl/errors.clj",1559507883000],"~:analyzer",["^ ","^3",null,"^4",["^ "],"^5",["^ ","^6","datascript/impl/entity.cljc","^7",1,"^8",14,"^9",1,"^:",36,"^;",true],"^<",["^ ","^=","^>","^?","^@","^A","^B","^C","^D","^E","^F","^G","^H","^I","^J","^K","^L"],"^M",null,"^N",["^O",["^P","^Q"]],"~:shadow/js-access-properties",["^O",["entry_set","value_set","key_set","equiv"]],"^R","^S","^V",null,"^W",["^ ","^X","^X","~$c","^X","^Y","^Y","^Z","^Y","^[","^["],"^10",["^O",["^11"]],"~:shadow/js-access-global",["^O",["Error"]],"^12",null,"~:defs",["^ ","~$entity",["^ ","~:protocol-inline",null,"^5",["^ ","^6","datascript/impl/entity.cljc","^7",14,"^8",7,"^9",14,"^:",13,"~:arglists",["^15",["~$quote",["^15",[["^Z","~$eid"]]]]]],"^R","~$datascript.impl.entity/entity","^6","datascript/impl/entity.cljc","^:",13,"~:method-params",["^15",[["^Z","^3K"]]],"~:protocol-impl",null,"~:arglists-meta",["^15",[null,null]],"^8",1,"~:variadic?",false,"^7",14,"~:ret-tag",["^O",["~$any","~$clj-nil"]],"^9",14,"~:max-fixed-arity",2,"~:fn-var",true,"^3I",["^15",["^3J",["^15",[["^Z","^3K"]]]]]],"~$equiv-entity",["^ ","^3H",null,"^5",["^ ","^6","datascript/impl/entity.cljc","^7",153,"^8",8,"^9",153,"^:",20,"~:private",true,"^3I",["^15",["^3J",["^15",[["~$this","~$that"]]]]]],"^3W",true,"^R","~$datascript.impl.entity/equiv-entity","^6","datascript/impl/entity.cljc","^:",20,"^3M",["^15",[["^3X","^3Y"]]],"^3N",null,"^3O",["^15",[null,null]],"^8",1,"^3P",false,"^7",153,"^3Q","~$boolean","^9",153,"^3T",2,"^3U",true,"^3I",["^15",["^3J",["^15",[["^3X","^3Y"]]]]]],"~$Entity",["^ ","~:num-fields",4,"~:protocols",["^O",["~$cljs.core/IEquiv","~$cljs.core/IHash","~$cljs.core/IFn","~$cljs.core/Object","~$cljs.core/ICounted","~$cljs.core/ISeqable","~$cljs.core/IPrintWithWriter","~$cljs.core/IAssociative","~$cljs.core/ILookup"]],"^R","~$datascript.impl.entity/Entity","^6","datascript/impl/entity.cljc","^:",16,"~:type",true,"^8",10,"^7",47,"~:record",false,"^9",47,"~:tag","~$function","~:skip-protocol-flag",["^O",["^43","^44","^45","^47","^48","^49","^4:","^4;"]]],"~$multival->js",["^ ","^3H",null,"^5",["^ ","^6","datascript/impl/entity.cljc","^7",36,"^8",11,"^9",36,"^:",23,"^3W",true,"^3I",["^15",["^3J",["^15",[["~$val"]]]]]],"^3W",true,"^R","~$datascript.impl.entity/multival->js","^6","datascript/impl/entity.cljc","^:",23,"^3M",["^15",[["^4C"]]],"^3N",null,"^3O",["^15",[null,null]],"^8",4,"^3P",false,"^7",36,"^3Q",["^O",["~$array","^3S"]],"^9",36,"^3T",1,"^3U",true,"^3I",["^15",["^3J",["^15",[["^4C"]]]]]],"~$entity?",["^ ","^3H",null,"^5",["^ ","^6","datascript/impl/entity.cljc","^7",147,"^8",7,"^9",147,"^:",14,"^3I",["^15",["^3J",["^15",[["~$x"]]]]]],"^R","~$datascript.impl.entity/entity?","^6","datascript/impl/entity.cljc","^:",14,"^3M",["^15",[["~$x"]]],"^3N",null,"^3O",["^15",[null,null]],"^8",1,"^3P",false,"^7",147,"^3Q","^3[","^9",147,"^3T",1,"^3U",true,"^3I",["^15",["^3J",["^15",[["~$x"]]]]]],"~$entity-attr",["^ ","^3H",null,"^5",["^ ","^6","datascript/impl/entity.cljc","^7",19,"^8",8,"^9",19,"^:",19,"^3W",true,"^3I",["^15",["^3J",["^15",[["^Z","~$a","~$datoms"]]]]]],"^3W",true,"^R","~$datascript.impl.entity/entity-attr","^6","datascript/impl/entity.cljc","^:",19,"^3M",["^15",[["^Z","~$a","^4I"]]],"^3N",null,"^3O",["^15",[null,null]],"^8",1,"^3P",false,"^7",19,"^3Q",["^O",[null,"^3R","^3S"]],"^9",19,"^3T",3,"^3U",true,"^3I",["^15",["^3J",["^15",[["^Z","~$a","^4I"]]]]]],"~$touch-components",["^ ","^3H",null,"^5",["^ ","^6","datascript/impl/entity.cljc","^7",176,"^8",7,"^9",176,"^:",23,"^3I",["^15",["^3J",["^15",[["^Z","~$a->v"]]]]]],"^R","~$datascript.impl.entity/touch-components","^6","datascript/impl/entity.cljc","^:",23,"^3M",["^15",[["^Z","^4L"]]],"^3N",null,"^3O",["^15",[null,null]],"^8",1,"^3P",false,"^7",176,"^3Q",["^O",[null,"^3R"]],"^9",176,"^3T",2,"^3U",true,"^3I",["^15",["^3J",["^15",[["^Z","^4L"]]]]]],"~$js-seq",["^ ","^3H",null,"^5",["^ ","^6","datascript/impl/entity.cljc","^7",40,"^8",11,"^9",40,"^:",17,"^3W",true,"^3I",["^15",["^3J",["^15",[["~$e"]]]]]],"^3W",true,"^R","~$datascript.impl.entity/js-seq","^6","datascript/impl/entity.cljc","^:",17,"^3M",["^15",[["~$e"]]],"^3N",null,"^3O",["^15",[null,null]],"^8",4,"^3P",false,"^7",40,"^3Q","~$cljs.core/LazySeq","^9",40,"^3T",1,"^3U",true,"^3I",["^15",["^3J",["^15",[["~$e"]]]]]],"~$-lookup-backwards",["^ ","^3H",null,"^5",["^ ","^6","datascript/impl/entity.cljc","^7",28,"^8",8,"^9",28,"^:",25,"^3W",true,"^3I",["^15",["^3J",["^15",[["^Z","^3K","~$attr","~$not-found"]]]]]],"^3W",true,"^R","~$datascript.impl.entity/-lookup-backwards","^6","datascript/impl/entity.cljc","^:",25,"^3M",["^15",[["^Z","^3K","^4R","^4S"]]],"^3N",null,"^3O",["^15",[null,null]],"^8",1,"^3P",false,"^7",28,"^3Q",["^O",[null,"^3R","^3S"]],"^9",28,"^3T",4,"^3U",true,"^3I",["^15",["^3J",["^15",[["^Z","^3K","^4R","^4S"]]]]]],"~$touch",["^ ","^3H",null,"^5",["^ ","^6","datascript/impl/entity.cljc","^7",192,"^8",7,"^9",192,"^:",12,"^3I",["^15",["^3J",["^15",[["~$e"]]]]]],"^R","~$datascript.impl.entity/touch","^6","datascript/impl/entity.cljc","^:",12,"^3M",["^15",[["~$e"]]],"^3N",null,"^3O",["^15",[null,null]],"^8",1,"^3P",false,"^7",192,"^3Q","^40","^9",192,"^3T",1,"^3U",true,"^3I",["^15",["^3J",["^15",[["~$e"]]]]]],"~$lookup-entity",["^ ","^3H",null,"^5",["^ ","^6","datascript/impl/entity.cljc","^7",159,"^8",8,"^9",159,"^:",21,"^3W",true,"^3I",["^15",["^3J",["^15",[["^3X","^4R"],["^3X","^4R","^4S"]]]]],"~:top-fn",["^ ","^3P",false,"~:fixed-arity",3,"^3T",3,"^3M",["^15",[["^3X","^4R"],["^3X","^4R","^4S"]]],"^3I",["^15",[["^3X","^4R"],["^3X","^4R","^4S"]]],"^3O",["^15",[null,null]]]],"^3W",true,"^R","~$datascript.impl.entity/lookup-entity","^6","datascript/impl/entity.cljc","^:",21,"^4X",["^ ","^3P",false,"^4Y",3,"^3T",3,"^3M",["^15",[["^3X","^4R"],["^3X","^4R","^4S"]]],"^3I",["^15",[["^3X","^4R"],["^3X","^4R","^4S"]]],"^3O",["^15",[null,null]]],"^3M",["^15",[["^3X","^4R"],["^3X","^4R","^4S"]]],"^3N",null,"^4Y",3,"^3O",["^15",[null,null]],"^8",1,"^3P",false,"~:methods",[["^ ","^4Y",2,"^3P",false,"^4?","^3R"],["^ ","^4Y",3,"^3P",false,"^4?",["^O",[null,"^3R","^3S"]]]],"^7",159,"^9",159,"^3T",3,"^3U",true,"^3I",["^15",[["^3X","^4R"],["^3X","^4R","^4S"]]]],"~$->Entity",["^ ","^3H",null,"^5",["^ ","^42",["^O",["^43","^44","^45","^46","^47","^48","^49","^4:","^4;"]],"^6","datascript/impl/entity.cljc","^:",16,"^8",10,"~:factory","~:positional","^7",47,"^9",47,"^3I",["^15",["^3J",["^15",[["^Z","^3K","~$touched","~$cache"]]]]],"^4A",["^O",["^43","^44","^45","^47","^48","^49","^4:","^4;"]],"~:doc","Positional factory function for datascript.impl.entity/Entity."],"^42",["^O",["^43","^44","^45","^46","^47","^48","^49","^4:","^4;"]],"^R","~$datascript.impl.entity/->Entity","^6","datascript/impl/entity.cljc","^:",16,"^3M",["^15",[["^Z","^3K","^53","^54"]]],"^3N",null,"^3O",["^15",[null,null]],"^8",1,"^3P",false,"^51","^52","^7",47,"^3Q","^4<","^9",47,"^3T",4,"^3U",true,"^3I",["^15",["^3J",["^15",[["^Z","^3K","^53","^54"]]]]],"^4A",["^O",["^43","^44","^45","^47","^48","^49","^4:","^4;"]],"^55","Positional factory function for datascript.impl.entity/Entity."],"~$entid",["^ ","^3H",null,"^5",["^ ","^6","datascript/impl/entity.cljc","^7",8,"^8",8,"^9",8,"^:",13,"^3W",true,"^3I",["^15",["^3J",["^15",[["^Z","^3K"]]]]]],"^3W",true,"^R","~$datascript.impl.entity/entid","^6","datascript/impl/entity.cljc","^:",13,"^3M",["^15",[["^Z","^3K"]]],"^3N",null,"^3O",["^15",[null,null]],"^8",1,"^3P",false,"^7",8,"^3Q",["^O",[null,"^3R","^3S"]],"^9",8,"^3T",2,"^3U",true,"^3I",["^15",["^3J",["^15",[["^Z","^3K"]]]]]],"~$datoms->cache",["^ ","^3H",null,"^5",["^ ","^6","datascript/impl/entity.cljc","^7",186,"^8",8,"^9",186,"^:",21,"^3W",true,"^3I",["^15",["^3J",["^15",[["^Z","^4I"]]]]]],"^3W",true,"^R","~$datascript.impl.entity/datoms->cache","^6","datascript/impl/entity.cljc","^:",21,"^3M",["^15",[["^Z","^4I"]]],"^3N",null,"^3O",["^15",[null,null]],"^8",1,"^3P",false,"^7",186,"^3Q",["^O",[null,"^3R"]],"^9",186,"^3T",2,"^3U",true,"^3I",["^15",["^3J",["^15",[["^Z","^4I"]]]]]]],"^13",["^ ","^X","^X","~$c","^X","^Y","^Y","^Z","^Y"],"~:cljs.analyzer/constants",["^ ","^10",["^O",["^3K","~:v","^Z","~:e","^53","~:db/id","~:datascript.impl.entity/nf","^54","~:a"]],"~:order",["~:v","~:e","^5<","^5=","^Z","^3K","^53","^54","~:a"]],"^1:",["^ ","^11",["^O",[]]],"^1;",["^ "],"^1<",["^[","^X","^Y"]],"^U","^S","~:ns-specs",["^ "],"~:ns-spec-vars",["^O",[]],"~:compiler-options",["^1J",[["^5A","~:static-fns"],true,["^5A","~:shadow-tweaks"],null,["^5A","~:elide-asserts"],false,["^5A","~:optimize-constants"],null,["^5A","^1A"],null,["^5A","~:external-config"],null,["^5A","~:tooling-config"],null,["^5A","~:emit-constants"],null,["^5A","~:load-tests"],null,["^5A","~:form-size-threshold"],null,["^5A","~:infer-externs"],true,["^5A","^1C"],null,["~:js-options","~:js-provider"],"~:shadow",["~:mode"],"~:dev",["^5A","~:fn-invoke-direct"],null,["^5A","~:source-map"],"/dev/null"]]]